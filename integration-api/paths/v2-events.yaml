# path: /v2/events
post:
  operationId: trackEventV2
  summary: Track event
  description: >
    Triggers a custom event.


    To use this endpoint:

    1. Define a [custom
    event](https://docs.talon.one/docs/dev/concepts/entities/events#creating-a-custom-event)
    in the Campaign Manager.

    1. Update or create a rule to check for this event.

    1. Trigger the event with this endpoint. After you have successfully sent an
    event to Talon.One, you can list the received events in the **Events** view
    in the Campaign Manager.


    Talon.One also offers a set of [built-in
    events](https://docs.talon.one/docs/dev/concepts/entities/events). Ensure
    you do not create

    a custom event when you can use a built-in event.


    For example, use this endpoint to trigger an event when a customer shares a
    link to a product.

    See the
    [tutorial](https://docs.talon.one/docs/product/tutorials/referrals/incentivizing-product-link-sharing).


    <div class="redoc-section">

      <p class="title">Important</p>

      1. `profileId` is required even though the schema does not specify it.
      1. If the customer profile ID is new, a new profile is automatically created but the `customer_profile_created` [built-in event ](https://docs.talon.one/docs/dev/concepts/entities/events) is **not** triggered.
      1. We recommend sending requests sequentially. See [Managing parallel requests](https://docs.talon.one/docs/dev/getting-started/integration-tutorial#managing-parallel-requests).
      1. [Archived campaigns](https://docs.talon.one/docs/product/campaigns/managing-campaigns#archiving-a-campaign) are not considered in rule evaluation.

    </div>
  security:
    - api_key_v1: []
  tags:
    - Events
  parameters:
    - name: silent
      in: query
      description: >
        Possible values: `yes` or `no`.

        - `yes`: Increases the performance of the API call by returning a 204
        response.

        - `no`: Returns a 200 response that contains the updated customer
        profiles.
      example: 'yes'
      required: false
      schema:
        type: string
        default: 'yes'
    - name: dry
      in: query
      description: >
        Indicates whether to persist the changes. Changes are ignored when
        `dry=true`.
      example: false
      required: false
      schema:
        type: boolean
    - name: forceCompleteEvaluation
      in: query
      description: >
        Forces evaluation for all matching campaigns regardless of the [campaign
        evaluation
        mode](https://docs.talon.one/docs/product/applications/managing-campaign-evaluation#setting-campaign-evaluation-mode).
        Requires `dry=true`.
      example: false
      required: false
      schema:
        type: boolean
        default: false
  requestBody:
    content:
      application/json:
        schema:
          allOf:
            - allOf:
                - type: object
                  properties:
                    profileId:
                      type: string
                      description: >
                        ID of the customer profile set by your integration
                        layer.


                        **Note:** If the customer does not yet have a known
                        `profileId`, we recommend you use a guest `profileId`.
                      example: URNGV8294NV
                - type: object
                  properties:
                    storeIntegrationId:
                      type: string
                      minLength: 1
                      maxLength: 1000
                      description: >-
                        The integration ID of the store. You choose this ID when
                        you create a store.
                      example: STORE-001
                - type: object
                  properties:
                    evaluableCampaignIds:
                      type: array
                      items:
                        type: integer
                      description: >
                        When using the `dry` query parameter, use this property
                        to list the campaign to be evaluated by the Rule Engine.


                        These campaigns will be evaluated, even if they are
                        disabled, allowing you to test specific campaigns before
                        activating them.
                      title: Campaigns to evaluate
                      example:
                        - 10
                        - 12
                - type: object
                  required:
                    - type
                  properties:
                    type:
                      type: string
                      title: Event Type
                      description: >
                        A string representing the event name. Must not be a
                        reserved event name. You create this value when you
                        [create an
                        attribute](https://docs.talon.one/docs/dev/concepts/entities/events#creating-a-custom-event)
                        of type `event` in the Campaign Manager.
                      minLength: 1
                      example: pageViewed
                    attributes:
                      type: object
                      description: >-
                        Arbitrary additional JSON properties associated with the
                        event. They must be created in the Campaign Manager
                        before setting them with this property. See [creating
                        custom
                        attributes](https://docs.talon.one/docs/product/account/dev-tools/managing-attributes#creating-a-custom-attribute).
                      example:
                        myAttribute: myValue
            - type: object
              properties:
                loyaltyCards:
                  type: array
                  maxItems: 1
                  items:
                    type: string
                  description: Identifier of the loyalty card used during this event.
                  example:
                    - loyalty-card-1
                responseContent:
                  type: array
                  description: >
                    Optional list of requested information to be present on the
                    response related to the tracking custom event.
                  example:
                    - triggeredCampaigns
                    - customerProfile
                  items:
                    type: string
                    enum:
                      - customerProfile
                      - triggeredCampaigns
                      - loyalty
                      - event
                      - awardedGiveaways
                      - ruleFailureReasons
    description: body
    required: true
  responses:
    '200':
      description: OK
      content:
        application/json:
          schema:
            type: object
            description: |
              This is the response type returned by the trackEventV2 endpoint.
            required:
              - effects
              - createdCoupons
              - createdReferrals
            properties:
              customerProfile:
                allOf:
                  - type: object
                    required:
                      - id
                      - created
                    properties:
                      id:
                        type: integer
                        description: The internal ID of the customer profile.
                        example: 6
                      created:
                        type: string
                        format: date-time
                        description: The time the customer profile was created.
                        example: '2020-06-10T09:05:27.993483Z'
                  - type: object
                    required:
                      - integrationId
                      - created
                    properties:
                      integrationId:
                        type: string
                        format: string
                        example: URNGV8294NV
                        maxLength: 1000
                        description: The integration ID set by your integration layer.
                      created:
                        type: string
                        format: date-time
                        description: The time this entity was created.
                        example: '2020-02-07T08:15:22Z'
                  - type: object
                    properties:
                      attributes:
                        type: object
                        description: Arbitrary properties associated with this item.
                        example:
                          Language: english
                          ShippingCountry: DE
                  - type: object
                    properties:
                      accountId:
                        type: integer
                        title: Profile belongs to Account
                        description: >-
                          The ID of the Talon.One account that owns this
                          profile.
                        example: 31
                      closedSessions:
                        type: integer
                        title: Closed sessions
                        description: >-
                          The total number of closed sessions. Does not include
                          closed sessions that have been cancelled or reopened.
                          See the
                          [docs](https://docs.talon.one/docs/dev/concepts/entities/customer-sessions#customer-session-states).
                        example: 3
                      totalSales:
                        type: number
                        description: >
                          The total amount of money spent by the customer
                          **before** discounts are applied.


                          The total sales amount excludes the following:

                          - Cancelled or reopened sessions.

                          - Returned items.
                        example: 299.99
                        title: Total Sales
                      loyaltyMemberships:
                        type: array
                        description: >
                          **DEPRECATED** A list of loyalty programs joined by
                          the customer.
                        items:
                          type: object
                          required:
                            - loyaltyProgramId
                          properties:
                            joined:
                              type: string
                              format: date-time
                              title: Loyalty program joined at
                              description: >-
                                The moment in which the loyalty program was
                                joined.
                              example: '2012-03-20T14:15:22Z'
                            loyaltyProgramId:
                              type: integer
                              title: Loyalty program ID
                              description: >-
                                The ID of the loyalty program belonging to this
                                entity.
                              example: 323414846
                        title: Loyalty programed joined
                      audienceMemberships:
                        type: array
                        description: The audiences the customer belongs to.
                        items:
                          type: object
                          required:
                            - id
                            - name
                          properties:
                            id:
                              type: integer
                              title: Audience ID
                              description: The ID of the audience belonging to this entity.
                              example: 2
                            name:
                              type: string
                              title: Audience Name
                              description: >-
                                The Name of the audience belonging to this
                                entity.
                              example: Travel audience
                        title: Audience memberships
                      lastActivity:
                        type: string
                        format: date-time
                        title: Last activity
                        description: >
                          Timestamp of the most recent event received from this
                          customer.

                          This field is updated on calls that trigger the Rule
                          Engine and that are

                          not [dry
                          requests](https://docs.talon.one/docs/dev/integration-api/dry-requests/#overlay).


                          For example, [reserving a
                          coupon](https://docs.talon.one/integration-api#operation/createCouponReservation)

                          for a customer doesn't impact this field.
                        example: '2020-02-08T14:15:20Z'
                      sandbox:
                        type: boolean
                        description: >
                          An indicator of whether the customer is part of a
                          sandbox or live Application. See the
                          [docs](https://docs.talon.one/docs/product/applications/overview#application-environments).
                        title: Sandbox
                        example: false
                    required:
                      - accountId
                      - closedSessions
                      - totalSales
                      - lastActivity
                      - attributes
              event:
                allOf:
                  - type: object
                    required:
                      - id
                      - created
                    properties:
                      id:
                        type: integer
                        description: The internal ID of this entity.
                        example: 6
                      created:
                        type: string
                        format: date-time
                        description: The time this entity was created.
                        example: '2020-06-10T09:05:27.993483Z'
                  - type: object
                    required:
                      - applicationId
                    properties:
                      applicationId:
                        type: integer
                        description: The ID of the Application that owns this entity.
                        example: 322
                  - allOf:
                      - type: object
                        properties:
                          profileId:
                            type: string
                            description: >
                              ID of the customer profile set by your integration
                              layer.


                              **Note:** If the customer does not yet have a
                              known `profileId`, we recommend you use a guest
                              `profileId`.
                            example: URNGV8294NV
                      - type: object
                        properties:
                          storeIntegrationId:
                            type: string
                            minLength: 1
                            maxLength: 1000
                            description: >-
                              The integration ID of the store. You choose this
                              ID when you create a store.
                            example: STORE-001
                      - type: object
                        properties:
                          type:
                            type: string
                            title: Event Type
                            description: >-
                              A string representing the event. Must not be a
                              reserved event name.
                            minLength: 1
                            example: pageViewed
                          attributes:
                            type: object
                            description: >-
                              Arbitrary additional JSON data associated with the
                              event.
                            example:
                              myAttribute: myValue
                        required:
                          - type
                          - attributes
                  - type: object
                    required:
                      - effects
                    properties:
                      sessionId:
                        type: string
                        title: Session ID of Event
                        description: The ID of the session that this event occurred in.
                        example: 175KJPS947296
                      effects:
                        type: array
                        description: >
                          An array of effects generated by the rules of the
                          enabled campaigns of the Application.


                          You decide how to apply them in your system. See the
                          list of [API
                          effects](https://docs.talon.one/docs/dev/integration-api/api-effects).
                        items:
                          type: array
                          items: {}
                      ledgerEntries:
                        type: array
                        description: Ledger entries for the event.
                        items:
                          allOf:
                            - type: object
                              required:
                                - id
                                - created
                              properties:
                                id:
                                  type: integer
                                  description: The internal ID of this entity.
                                  example: 6
                                created:
                                  type: string
                                  format: date-time
                                  description: The time this entity was created.
                                  example: '2020-06-10T09:05:27.993483Z'
                            - type: object
                              properties:
                                profileId:
                                  type: string
                                  description: >
                                    ID of the customer profile set by your
                                    integration layer.


                                    **Note:** If the customer does not yet have
                                    a known `profileId`, we recommend you use a
                                    guest `profileId`.
                                  example: URNGV8294NV
                            - type: object
                              description: Entry in the point ledger.
                              required:
                                - eventId
                                - accountId
                                - profileId
                                - loyaltyProgramId
                                - amount
                                - reason
                                - expiryDate
                              properties:
                                accountId:
                                  type: integer
                                  description: >-
                                    The ID of the Talon.One account that owns
                                    this profile.
                                loyaltyProgramId:
                                  type: integer
                                  description: ID of the ledger.
                                  example: 323414846
                                eventId:
                                  type: integer
                                  description: ID of the related event.
                                  example: 3
                                amount:
                                  type: integer
                                  description: Amount of loyalty points.
                                  example: 100
                                reason:
                                  type: string
                                  description: reason for awarding/deducting points.
                                  example: Customer appeasement.
                                expiryDate:
                                  type: string
                                  format: date-time
                                  description: Expiration date of the points.
                                  example: '2022-04-26T11:02:38Z'
                                referenceId:
                                  type: integer
                                  description: The ID of the balancing ledgerEntry.
                      meta:
                        type: object
                        properties:
                          campaigns:
                            description: >-
                              Maps each evaluated campaign ID to a key-value
                              list of that campaigns attributes. Campaigns
                              without attributes will be omitted.
                            type: object
                          coupons:
                            description: >-
                              Maps the coupon value to a key-value list of that
                              coupons attributes.
                            type: object
                          couponRejectionReason:
                            description: >-
                              Holds a reference to the campaign, the coupon and
                              the reason for which that coupon was rejected.
                              Should only be present when there is a
                              'rejectCoupon' effect.
                            type: object
                            required:
                              - campaignId
                              - couponId
                              - reason
                            properties:
                              campaignId:
                                type: integer
                                example: 244
                              couponId:
                                type: integer
                                example: 4928
                              reason:
                                type: string
                                enum:
                                  - CouponNotFound
                                  - CouponPartOfNotRunningCampaign
                                  - CampaignLimitReached
                                  - ProfileLimitReached
                                  - CouponRecipientDoesNotMatch
                                  - CouponExpired
                                  - CouponStartDateInFuture
                                  - CouponRejectedByCondition
                                  - EffectCouldNotBeApplied
                                  - CouponPartOfNotTriggeredCampaign
                                  - CouponReservationRequired
                                  - ProfileRequired
                                example: CouponNotFound
                          referralRejectionReason:
                            description: >-
                              Holds a reference to the campaign, the referral
                              and the reason for which that referral was
                              rejected. Should only be present when there is a
                              'rejectReferral' effect.
                            type: object
                            required:
                              - campaignId
                              - referralId
                              - reason
                            properties:
                              campaignId:
                                type: integer
                              referralId:
                                type: integer
                              reason:
                                type: string
                                enum:
                                  - ReferralNotFound
                                  - ReferralRecipientIdSameAsAdvocate
                                  - ReferralPartOfNotRunningCampaign
                                  - ReferralLimitReached
                                  - CampaignLimitReached
                                  - ProfileLimitReached
                                  - ReferralRecipientDoesNotMatch
                                  - ReferralExpired
                                  - ReferralStartDateInFuture
                                  - ReferralRejectedByCondition
                                  - EffectCouldNotBeApplied
                                  - ReferralPartOfNotTriggeredCampaign
                                example: ReferralNotFound
                          warnings:
                            description: Contains warnings about possible misuse.
                            type: object
              loyalty:
                type: object
                description: Customer-specific information about loyalty points.
                required:
                  - programs
                properties:
                  cards:
                    title: Point balances of the loyalty cards used.
                    description: >-
                      Displays information about the balances of the loyalty
                      cards.
                    type: array
                    items:
                      allOf:
                        - type: object
                          required:
                            - id
                            - created
                          properties:
                            id:
                              type: integer
                              description: The internal ID of this entity.
                              example: 6
                            created:
                              type: string
                              format: date-time
                              description: The time this entity was created.
                              example: '2020-06-10T09:05:27.993483Z'
                        - type: object
                          required:
                            - programID
                          properties:
                            programID:
                              type: integer
                              description: >-
                                The ID of the loyalty program that owns this
                                entity.
                              example: 125
                            programName:
                              type: string
                              description: >-
                                The integration name of the loyalty program that
                                owns this entity.
                              example: Loyalty_program
                            programTitle:
                              type: string
                              description: >-
                                The Campaign Manager-displayed name of the
                                loyalty program that owns this entity.
                              example: Loyalty program
                        - type: object
                          required:
                            - status
                          properties:
                            status:
                              type: string
                              description: >
                                Status of the loyalty card. Can be `active` or
                                `inactive`.
                              example: active
                            blockReason:
                              type: string
                              description: >
                                Reason for transferring and blocking the loyalty
                                card.
                              example: Current card lost. Customer needs a new card.
                        - type: object
                          required:
                            - identifier
                            - usersPerCardLimit
                          properties:
                            identifier:
                              type: string
                              description: |
                                The alphanumeric identifier of the loyalty card.
                              maxLength: 108
                              pattern: ^[A-Za-z0-9_-]*$
                              example: summer-loyalty-card-0543
                            usersPerCardLimit:
                              type: integer
                              minimum: 0
                              example: 111
                              description: >
                                The max amount of customer profiles that can be
                                linked to the card. 0 means unlimited.
                            profiles:
                              type: array
                              description: >-
                                Integration IDs of the customers profiles linked
                                to the card.
                              items:
                                type: object
                                required:
                                  - integrationId
                                  - timestamp
                                properties:
                                  integrationId:
                                    type: string
                                    maxLength: 1000
                                    description: >-
                                      Integration ID of the customer profile
                                      linked to the card.
                                    example: R195412
                                  timestamp:
                                    type: string
                                    format: date-time
                                    description: >-
                                      Timestamp the customer profile was linked
                                      to the card.
                                    example: '2021-09-12T10:12:42Z'
                            ledger:
                              description: >-
                                Displays point balances of the card in the main
                                ledger of the loyalty program.
                              allOf:
                                - type: object
                                  required:
                                    - currentBalance
                                    - pendingBalance
                                    - expiredBalance
                                    - spentBalance
                                    - tentativeCurrentBalance
                                  description: >-
                                    The balance in a Loyalty Program for some
                                    Customer.
                                  properties:
                                    currentBalance:
                                      type: number
                                      title: Current balance
                                      description: Sum of currently active points.
                                      example: 100
                                    pendingBalance:
                                      type: number
                                      title: Pending balance
                                      description: Sum of pending points.
                                      example: 10
                                    negativeBalance:
                                      type: number
                                      title: Negative balance
                                      description: >-
                                        Sum of negative points. This implies
                                        that `currentBalance` is `0`.
                                      example: 10
                                    expiredBalance:
                                      type: number
                                      title: Expired balance
                                      description: |
                                        **DEPRECATED** Value is shown as 0.
                                      example: 0
                                    spentBalance:
                                      type: number
                                      title: Spent balance
                                      description: |
                                        **DEPRECATED** Value is shown as 0.
                                      example: 0
                                    tentativeCurrentBalance:
                                      type: number
                                      title: Tentative current balance
                                      description: >
                                        The tentative points balance, reflecting
                                        the `currentBalance` and all point
                                        additions and deductions within the
                                        current open customer session. When the
                                        session is closed, the effects are
                                        applied and the `currentBalance` is
                                        updated to this value.


                                        **Note:** Tentative balances are
                                        specific to the current session and do
                                        not take into account other open
                                        sessions for the given customer.
                                      example: 100
                                    tentativePendingBalance:
                                      type: number
                                      title: Tentative pending balance
                                      description: >
                                        The tentative points balance, reflecting
                                        the `pendingBalance` and all point
                                        additions with a future activation date
                                        within the current open customer
                                        session. When the session is closed, the
                                        effects are applied and the
                                        `pendingBalance` is updated to this
                                        value.


                                        **Note:** Tentative balances are
                                        specific to the current session and do
                                        not take into account other open
                                        sessions for the given customer.
                                      example: 20
                                    tentativeNegativeBalance:
                                      type: number
                                      title: Tentative negative balance
                                      description: >
                                        The tentative negative balance after all
                                        additions and deductions from the
                                        current customer session are applied to
                                        `negativeBalance`. When the session is
                                        closed, the tentative effects are
                                        applied and `negativeBalance` is updated
                                        to this value.


                                        **Note:** Tentative balances are
                                        specific to the current session and do
                                        not take into account other open
                                        sessions for the given customer.
                                      example: 100
                                - type: object
                                  properties:
                                    currentTier:
                                      description: Tier for which the ledger is eligible.
                                      example: bronze
                                      type: object
                                      required:
                                        - id
                                        - name
                                      properties:
                                        id:
                                          type: integer
                                          description: The internal ID of the tier.
                                          example: 11
                                        name:
                                          type: string
                                          description: The name of the tier.
                                          example: bronze
                                        startDate:
                                          type: string
                                          format: date-time
                                          description: >-
                                            Date and time when the customer moved to
                                            this tier. This value uses the loyalty
                                            program's time zone setting.
                                          example: 2021-05-03T12:32:00Z07:00
                                        expiryDate:
                                          type: string
                                          format: date-time
                                          description: >-
                                            Date when tier level expires in the
                                            RFC3339 format (in the Loyalty Program's
                                            timezone).
                                          example: 2022-08-02T15:04:05Z07:00
                                        downgradePolicy:
                                          type: string
                                          enum:
                                            - one_down
                                            - balance_based
                                          description: >
                                            The policy that defines how customer
                                            tiers are downgraded in the loyalty
                                            program after tier reevaluation.
                                             - `one_down`: If the customer doesn't have enough points to stay in the current tier, they are downgraded by one tier.
                                             - `balance_based`: The customer's tier is reevaluated based on the amount of active points they have at the moment.
                                    pointsToNextTier:
                                      type: number
                                      description: Points required to move up a tier.
                                      example: 20
                            subledgers:
                              type: object
                              description: >-
                                Displays point balances of the card in the
                                subledgers of the loyalty program.
                              additionalProperties:
                                allOf:
                                  - type: object
                                    required:
                                      - currentBalance
                                      - pendingBalance
                                      - expiredBalance
                                      - spentBalance
                                      - tentativeCurrentBalance
                                    description: >-
                                      The balance in a Loyalty Program for some
                                      Customer.
                                    properties:
                                      currentBalance:
                                        type: number
                                        title: Current balance
                                        description: Sum of currently active points.
                                        example: 100
                                      pendingBalance:
                                        type: number
                                        title: Pending balance
                                        description: Sum of pending points.
                                        example: 10
                                      negativeBalance:
                                        type: number
                                        title: Negative balance
                                        description: >-
                                          Sum of negative points. This implies
                                          that `currentBalance` is `0`.
                                        example: 10
                                      expiredBalance:
                                        type: number
                                        title: Expired balance
                                        description: |
                                          **DEPRECATED** Value is shown as 0.
                                        example: 0
                                      spentBalance:
                                        type: number
                                        title: Spent balance
                                        description: |
                                          **DEPRECATED** Value is shown as 0.
                                        example: 0
                                      tentativeCurrentBalance:
                                        type: number
                                        title: Tentative current balance
                                        description: >
                                          The tentative points balance, reflecting
                                          the `currentBalance` and all point
                                          additions and deductions within the
                                          current open customer session. When the
                                          session is closed, the effects are
                                          applied and the `currentBalance` is
                                          updated to this value.


                                          **Note:** Tentative balances are
                                          specific to the current session and do
                                          not take into account other open
                                          sessions for the given customer.
                                        example: 100
                                      tentativePendingBalance:
                                        type: number
                                        title: Tentative pending balance
                                        description: >
                                          The tentative points balance, reflecting
                                          the `pendingBalance` and all point
                                          additions with a future activation date
                                          within the current open customer
                                          session. When the session is closed, the
                                          effects are applied and the
                                          `pendingBalance` is updated to this
                                          value.


                                          **Note:** Tentative balances are
                                          specific to the current session and do
                                          not take into account other open
                                          sessions for the given customer.
                                        example: 20
                                      tentativeNegativeBalance:
                                        type: number
                                        title: Tentative negative balance
                                        description: >
                                          The tentative negative balance after all
                                          additions and deductions from the
                                          current customer session are applied to
                                          `negativeBalance`. When the session is
                                          closed, the tentative effects are
                                          applied and `negativeBalance` is updated
                                          to this value.


                                          **Note:** Tentative balances are
                                          specific to the current session and do
                                          not take into account other open
                                          sessions for the given customer.
                                        example: 100
                                  - type: object
                                    properties:
                                      currentTier:
                                        description: Tier for which the ledger is eligible.
                                        example: bronze
                                        type: object
                                        required:
                                          - id
                                          - name
                                        properties:
                                          id:
                                            type: integer
                                            description: The internal ID of the tier.
                                            example: 11
                                          name:
                                            type: string
                                            description: The name of the tier.
                                            example: bronze
                                          startDate:
                                            type: string
                                            format: date-time
                                            description: >-
                                              Date and time when the customer moved to
                                              this tier. This value uses the loyalty
                                              program's time zone setting.
                                            example: 2021-05-03T12:32:00Z07:00
                                          expiryDate:
                                            type: string
                                            format: date-time
                                            description: >-
                                              Date when tier level expires in the
                                              RFC3339 format (in the Loyalty Program's
                                              timezone).
                                            example: 2022-08-02T15:04:05Z07:00
                                          downgradePolicy:
                                            type: string
                                            enum:
                                              - one_down
                                              - balance_based
                                            description: >
                                              The policy that defines how customer
                                              tiers are downgraded in the loyalty
                                              program after tier reevaluation.
                                               - `one_down`: If the customer doesn't have enough points to stay in the current tier, they are downgraded by one tier.
                                               - `balance_based`: The customer's tier is reevaluated based on the amount of active points they have at the moment.
                                      pointsToNextTier:
                                        type: number
                                        description: Points required to move up a tier.
                                        example: 20
                            modified:
                              type: string
                              format: date-time
                              description: >-
                                Timestamp of the most recent update of the
                                loyalty card.
                              example: '2021-09-12T10:12:42Z'
                            oldCardIdentifier:
                              description: >-
                                The identifier of the card from which the points
                                were transferred.
                              example: summer-loyalty-card-0543
                              type: string
                              maxLength: 108
                              pattern: ^[A-Za-z0-9_-]*$
                            newCardIdentifier:
                              description: >-
                                The identifier of the card to which the points
                                were transferred.
                              example: autumn-loyalty-card-5822
                              type: string
                              maxLength: 108
                              pattern: ^[A-Za-z0-9_-]*$
                            batchId:
                              description: >-
                                The ID of the batch in which the loyalty card
                                was created.
                              type: string
                              example: wdefpov
                  programs:
                    type: object
                    title: Customer's current loyalty program balance.
                    description: >-
                      Displays information about point balances in profile-based
                      programs.
                    additionalProperties:
                      type: object
                      description: Customer-specific information about loyalty points.
                      required:
                        - ledger
                        - title
                        - name
                        - id
                      properties:
                        id:
                          type: integer
                          description: The internal ID of loyalty program.
                          example: 5
                        title:
                          description: Visible name of loyalty program.
                          type: string
                          example: My loyalty program
                        name:
                          description: Internal name of loyalty program.
                          type: string
                          example: program1
                        joinDate:
                          description: >
                            The date on which the customer joined the loyalty
                            program in RFC3339.


                            **Note**: This is in the loyalty program's time
                            zone.
                          type: string
                          format: date-time
                          example: 2024-04-30T15:04:05Z07:00
                        ledger:
                          title: Customer's current loyalty program status
                          description: >-
                            Information about the main ledger in the loyalty
                            program.
                          allOf:
                            - type: object
                              required:
                                - currentBalance
                                - pendingBalance
                                - expiredBalance
                                - spentBalance
                                - tentativeCurrentBalance
                              description: >-
                                The balance in a Loyalty Program for some
                                Customer.
                              properties:
                                currentBalance:
                                  type: number
                                  title: Current balance
                                  description: Sum of currently active points.
                                  example: 100
                                pendingBalance:
                                  type: number
                                  title: Pending balance
                                  description: Sum of pending points.
                                  example: 10
                                negativeBalance:
                                  type: number
                                  title: Negative balance
                                  description: >-
                                    Sum of negative points. This implies that
                                    `currentBalance` is `0`.
                                  example: 10
                                expiredBalance:
                                  type: number
                                  title: Expired balance
                                  description: |
                                    **DEPRECATED** Value is shown as 0.
                                  example: 0
                                spentBalance:
                                  type: number
                                  title: Spent balance
                                  description: |
                                    **DEPRECATED** Value is shown as 0.
                                  example: 0
                                tentativeCurrentBalance:
                                  type: number
                                  title: Tentative current balance
                                  description: >
                                    The tentative points balance, reflecting the
                                    `currentBalance` and all point additions and
                                    deductions within the current open customer
                                    session. When the session is closed, the
                                    effects are applied and the `currentBalance`
                                    is updated to this value.


                                    **Note:** Tentative balances are specific to
                                    the current session and do not take into
                                    account other open sessions for the given
                                    customer.
                                  example: 100
                                tentativePendingBalance:
                                  type: number
                                  title: Tentative pending balance
                                  description: >
                                    The tentative points balance, reflecting the
                                    `pendingBalance` and all point additions
                                    with a future activation date within the
                                    current open customer session. When the
                                    session is closed, the effects are applied
                                    and the `pendingBalance` is updated to this
                                    value.


                                    **Note:** Tentative balances are specific to
                                    the current session and do not take into
                                    account other open sessions for the given
                                    customer.
                                  example: 20
                                tentativeNegativeBalance:
                                  type: number
                                  title: Tentative negative balance
                                  description: >
                                    The tentative negative balance after all
                                    additions and deductions from the current
                                    customer session are applied to
                                    `negativeBalance`. When the session is
                                    closed, the tentative effects are applied
                                    and `negativeBalance` is updated to this
                                    value.


                                    **Note:** Tentative balances are specific to
                                    the current session and do not take into
                                    account other open sessions for the given
                                    customer.
                                  example: 100
                            - type: object
                              properties:
                                currentTier:
                                  description: Tier for which the ledger is eligible.
                                  example: bronze
                                  type: object
                                  required:
                                    - id
                                    - name
                                  properties:
                                    id:
                                      type: integer
                                      description: The internal ID of the tier.
                                      example: 11
                                    name:
                                      type: string
                                      description: The name of the tier.
                                      example: bronze
                                    startDate:
                                      type: string
                                      format: date-time
                                      description: >-
                                        Date and time when the customer moved to
                                        this tier. This value uses the loyalty
                                        program's time zone setting.
                                      example: 2021-05-03T12:32:00Z07:00
                                    expiryDate:
                                      type: string
                                      format: date-time
                                      description: >-
                                        Date when tier level expires in the
                                        RFC3339 format (in the Loyalty Program's
                                        timezone).
                                      example: 2022-08-02T15:04:05Z07:00
                                    downgradePolicy:
                                      type: string
                                      enum:
                                        - one_down
                                        - balance_based
                                      description: >
                                        The policy that defines how customer
                                        tiers are downgraded in the loyalty
                                        program after tier reevaluation.
                                         - `one_down`: If the customer doesn't have enough points to stay in the current tier, they are downgraded by one tier.
                                         - `balance_based`: The customer's tier is reevaluated based on the amount of active points they have at the moment.
                                pointsToNextTier:
                                  type: number
                                  description: Points required to move up a tier.
                                  example: 20
                        subLedgers:
                          type: object
                          description: >-
                            A map containing information about each loyalty
                            subledger.
                          additionalProperties:
                            allOf:
                              - type: object
                                required:
                                  - currentBalance
                                  - pendingBalance
                                  - expiredBalance
                                  - spentBalance
                                  - tentativeCurrentBalance
                                description: >-
                                  The balance in a Loyalty Program for some
                                  Customer.
                                properties:
                                  currentBalance:
                                    type: number
                                    title: Current balance
                                    description: Sum of currently active points.
                                    example: 100
                                  pendingBalance:
                                    type: number
                                    title: Pending balance
                                    description: Sum of pending points.
                                    example: 10
                                  negativeBalance:
                                    type: number
                                    title: Negative balance
                                    description: >-
                                      Sum of negative points. This implies that
                                      `currentBalance` is `0`.
                                    example: 10
                                  expiredBalance:
                                    type: number
                                    title: Expired balance
                                    description: |
                                      **DEPRECATED** Value is shown as 0.
                                    example: 0
                                  spentBalance:
                                    type: number
                                    title: Spent balance
                                    description: |
                                      **DEPRECATED** Value is shown as 0.
                                    example: 0
                                  tentativeCurrentBalance:
                                    type: number
                                    title: Tentative current balance
                                    description: >
                                      The tentative points balance, reflecting
                                      the `currentBalance` and all point
                                      additions and deductions within the
                                      current open customer session. When the
                                      session is closed, the effects are applied
                                      and the `currentBalance` is updated to
                                      this value.


                                      **Note:** Tentative balances are specific
                                      to the current session and do not take
                                      into account other open sessions for the
                                      given customer.
                                    example: 100
                                  tentativePendingBalance:
                                    type: number
                                    title: Tentative pending balance
                                    description: >
                                      The tentative points balance, reflecting
                                      the `pendingBalance` and all point
                                      additions with a future activation date
                                      within the current open customer session.
                                      When the session is closed, the effects
                                      are applied and the `pendingBalance` is
                                      updated to this value.


                                      **Note:** Tentative balances are specific
                                      to the current session and do not take
                                      into account other open sessions for the
                                      given customer.
                                    example: 20
                                  tentativeNegativeBalance:
                                    type: number
                                    title: Tentative negative balance
                                    description: >
                                      The tentative negative balance after all
                                      additions and deductions from the current
                                      customer session are applied to
                                      `negativeBalance`. When the session is
                                      closed, the tentative effects are applied
                                      and `negativeBalance` is updated to this
                                      value.


                                      **Note:** Tentative balances are specific
                                      to the current session and do not take
                                      into account other open sessions for the
                                      given customer.
                                    example: 100
                              - type: object
                                properties:
                                  currentTier:
                                    description: Tier for which the ledger is eligible.
                                    example: bronze
                                    type: object
                                    required:
                                      - id
                                      - name
                                    properties:
                                      id:
                                        type: integer
                                        description: The internal ID of the tier.
                                        example: 11
                                      name:
                                        type: string
                                        description: The name of the tier.
                                        example: bronze
                                      startDate:
                                        type: string
                                        format: date-time
                                        description: >-
                                          Date and time when the customer moved to
                                          this tier. This value uses the loyalty
                                          program's time zone setting.
                                        example: 2021-05-03T12:32:00Z07:00
                                      expiryDate:
                                        type: string
                                        format: date-time
                                        description: >-
                                          Date when tier level expires in the
                                          RFC3339 format (in the Loyalty Program's
                                          timezone).
                                        example: 2022-08-02T15:04:05Z07:00
                                      downgradePolicy:
                                        type: string
                                        enum:
                                          - one_down
                                          - balance_based
                                        description: >
                                          The policy that defines how customer
                                          tiers are downgraded in the loyalty
                                          program after tier reevaluation.
                                           - `one_down`: If the customer doesn't have enough points to stay in the current tier, they are downgraded by one tier.
                                           - `balance_based`: The customer's tier is reevaluated based on the amount of active points they have at the moment.
                                  pointsToNextTier:
                                    type: number
                                    description: Points required to move up a tier.
                                    example: 20
              triggeredCampaigns:
                type: array
                items:
                  allOf:
                    - type: object
                      required:
                        - id
                        - created
                      properties:
                        id:
                          type: integer
                          description: Unique ID for this entity.
                          example: 4
                        created:
                          type: string
                          format: date-time
                          description: The exact moment this entity was created.
                          example: '2020-06-10T09:05:27.993483Z'
                    - type: object
                      required:
                        - applicationId
                      properties:
                        applicationId:
                          type: integer
                          description: The ID of the Application that owns this entity.
                          example: 322
                    - type: object
                      required:
                        - userId
                      properties:
                        userId:
                          type: integer
                          description: The ID of the user associated with this entity.
                          example: 388
                    - type: object
                      properties:
                        name:
                          type: string
                          title: Campaign Name
                          description: A user-facing name for this campaign.
                          minLength: 1
                          example: Summer promotions
                        description:
                          type: string
                          title: Campaign Description
                          description: A detailed description of the campaign.
                          example: Campaign for all summer 2021 promotions
                        startTime:
                          type: string
                          format: date-time
                          description: Timestamp when the campaign will become active.
                          example: '2021-07-20T22:00:00Z'
                        endTime:
                          type: string
                          format: date-time
                          description: Timestamp when the campaign will become inactive.
                          example: '2021-09-22T22:00:00Z'
                        attributes:
                          type: object
                          description: Arbitrary properties associated with this campaign.
                        state:
                          type: string
                          enum:
                            - enabled
                            - disabled
                            - archived
                          default: enabled
                          example: enabled
                          description: >
                            A disabled or archived campaign is not evaluated for
                            rules or coupons.
                        activeRulesetId:
                          type: integer
                          description: >
                            [ID of
                            Ruleset](https://docs.talon.one/management-api#operation/getRulesets)
                            this

                            campaign applies on customer session evaluation.
                          example: 6
                        tags:
                          type: array
                          description: A list of tags for the campaign.
                          example:
                            - summer
                          maxItems: 50
                          items:
                            type: string
                            minLength: 1
                            maxLength: 50
                        features:
                          type: array
                          description: The features enabled in this campaign.
                          example:
                            - coupons
                            - referrals
                          items:
                            type: string
                            enum:
                              - coupons
                              - referrals
                              - loyalty
                              - giveaways
                              - strikethrough
                              - achievements
                        couponSettings:
                          type: object
                          properties:
                            validCharacters:
                              type: array
                              description: >
                                List of characters used to generate the random
                                parts of a code.
                              example:
                                - A
                                - B
                                - C
                                - D
                                - E
                                - F
                                - G
                                - H
                                - I
                                - J
                                - K
                                - L
                                - M
                                - 'N'
                                - O
                                - P
                                - Q
                                - R
                                - S
                                - T
                                - U
                                - V
                                - W
                                - X
                                - 'Y'
                                - Z
                                - '0'
                                - '1'
                                - '2'
                                - '3'
                                - '4'
                                - '5'
                                - '6'
                                - '7'
                                - '8'
                                - '9'
                              items:
                                type: string
                            couponPattern:
                              type: string
                              description: >
                                The pattern used to generate codes, such as
                                coupon codes, referral codes, and loyalty cards.
                                The character `#` is a placeholder and is
                                replaced by a random character from the
                                `validCharacters` set.
                              maxLength: 100
                              minLength: 3
                              pattern: ^[A-Za-z0-9_#-]*$
                              example: SUMMER-####-####
                          additionalProperties: false
                          required:
                            - couponPattern
                            - validCharacters
                        referralSettings:
                          type: object
                          properties:
                            validCharacters:
                              type: array
                              description: >
                                List of characters used to generate the random
                                parts of a code.
                              example:
                                - A
                                - B
                                - C
                                - D
                                - E
                                - F
                                - G
                                - H
                                - I
                                - J
                                - K
                                - L
                                - M
                                - 'N'
                                - O
                                - P
                                - Q
                                - R
                                - S
                                - T
                                - U
                                - V
                                - W
                                - X
                                - 'Y'
                                - Z
                                - '0'
                                - '1'
                                - '2'
                                - '3'
                                - '4'
                                - '5'
                                - '6'
                                - '7'
                                - '8'
                                - '9'
                              items:
                                type: string
                            couponPattern:
                              type: string
                              description: >
                                The pattern used to generate codes, such as
                                coupon codes, referral codes, and loyalty cards.
                                The character `#` is a placeholder and is
                                replaced by a random character from the
                                `validCharacters` set.
                              maxLength: 100
                              minLength: 3
                              pattern: ^[A-Za-z0-9_#-]*$
                              example: SUMMER-####-####
                          additionalProperties: false
                          required:
                            - couponPattern
                            - validCharacters
                        limits:
                          type: array
                          description: >
                            The set of [budget
                            limits](https://docs.talon.one/docs/product/campaigns/settings/managing-campaign-budgets)
                            for this campaign.
                          items:
                            type: object
                            required:
                              - action
                              - limit
                              - entities
                            properties:
                              action:
                                type: string
                                description: >
                                  The limitable action to which this limit
                                  applies. For example:

                                  - `setDiscount`

                                  - `setDiscountEffect`

                                  - `redeemCoupon`

                                  - `createCoupon`
                                example: createCoupon
                              limit:
                                type: number
                                minimum: 0
                                example: 1000
                                description: The value to set for the limit.
                              period:
                                description: The period on which the budget limit recurs.
                                type: string
                                enum:
                                  - daily
                                  - weekly
                                  - monthly
                                  - yearly
                                example: yearly
                              entities:
                                type: array
                                description: The entity that this limit applies to.
                                example:
                                  - Coupon
                                items:
                                  type: string
                                  enum:
                                    - Coupon
                                    - Referral
                                    - Profile
                                    - Identifier
                                    - Store
                                    - Session
                        campaignGroups:
                          type: array
                          description: >
                            The IDs of the [campaign
                            groups](https://docs.talon.one/docs/product/account/managing-campaign-groups)
                            this campaign belongs to.
                          example:
                            - 1
                            - 3
                          items:
                            type: integer
                        type:
                          type: string
                          title: Type
                          enum:
                            - cartItem
                            - advanced
                          default: advanced
                          example: advanced
                          description: |
                            The campaign type. Possible type values:
                              - `cartItem`: Type of campaign that can apply effects only to cart items.
                              - `advanced`: Type of campaign that can apply effects to customer sessions and cart items.
                        linkedStoreIds:
                          type: array
                          description: >
                            A list of store IDs that you want to link to the
                            campaign.


                            **Note:** Campaigns with linked store IDs will only
                            be evaluated when there is a

                            [customer session
                            update](https://docs.talon.one/integration-api#tag/Customer-sessions/operation/updateCustomerSessionV2)

                            that references a linked store.
                          items:
                            type: integer
                          example:
                            - 1
                            - 2
                            - 3
                      required:
                        - name
                        - state
                        - tags
                        - limits
                        - features
                    - type: object
                      properties:
                        budgets:
                          type: array
                          items:
                            type: object
                            required:
                              - action
                              - limit
                              - counter
                            properties:
                              action:
                                type: string
                                description: >
                                  The limitable action to which this limit
                                  applies. For example:

                                  - `setDiscount`

                                  - `setDiscountEffect`

                                  - `redeemCoupon`

                                  - `createCoupon`
                                example: createCoupon
                              limit:
                                type: number
                                minimum: 0
                                example: 1000
                                description: The value to set for the limit.
                              counter:
                                type: number
                                minimum: 0
                                example: 42
                                description: >-
                                  The number of occurrences of the limited
                                  action in the context of the campaign.
                          description: >
                            A list of all the budgets that are defined by this
                            campaign and their usage.


                            **Note:** Budgets that are not defined do not appear
                            in this list and their usage is

                            not counted until they are defined.
                        couponRedemptionCount:
                          type: integer
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Number of coupons redeemed in the campaign.
                          example: 163
                        referralRedemptionCount:
                          type: integer
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Number of referral codes redeemed in the campaign.
                          example: 3
                        discountCount:
                          type: number
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total amount of discounts redeemed in the campaign.
                          example: 288
                        discountEffectCount:
                          type: integer
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total number of times discounts were redeemed in
                            this campaign.
                          example: 343
                        couponCreationCount:
                          type: integer
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total number of coupons created by rules in this
                            campaign.
                          example: 16
                        customEffectCount:
                          type: integer
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total number of custom effects triggered by rules in
                            this campaign.
                          example: 0
                        referralCreationCount:
                          type: integer
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total number of referrals created by rules in this
                            campaign.
                          example: 8
                        addFreeItemEffectCount:
                          type: integer
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total number of times the [add free item
                            effect](https://docs.talon.one/docs/dev/integration-api/api-effects#addfreeitem)
                            can be triggered in this campaign.
                          example: 0
                        awardedGiveawaysCount:
                          type: integer
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total number of giveaways awarded by rules in this
                            campaign.
                          example: 9
                        createdLoyaltyPointsCount:
                          type: number
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total number of loyalty points created by rules in
                            this campaign.
                          example: 9
                        createdLoyaltyPointsEffectCount:
                          type: integer
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total number of loyalty point creation effects
                            triggered by rules in this campaign.
                          example: 2
                        redeemedLoyaltyPointsCount:
                          type: number
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total number of loyalty points redeemed by rules in
                            this campaign.
                          example: 8
                        redeemedLoyaltyPointsEffectCount:
                          type: integer
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total number of loyalty point redemption effects
                            triggered by rules in this campaign.
                          example: 9
                        callApiEffectCount:
                          type: integer
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total number of webhooks triggered by rules in this
                            campaign.
                          example: 0
                        reservecouponEffectCount:
                          type: integer
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total number of reserve coupon effects triggered by
                            rules in this campaign.
                          example: 9
                        lastActivity:
                          type: string
                          format: date-time
                          example: '2022-11-10T23:00:00Z'
                          description: >-
                            Timestamp of the most recent event received by this
                            campaign.
                        updated:
                          type: string
                          format: date-time
                          example: '2022-10-97T35:00:00Z'
                          description: >
                            Timestamp of the most recent update to the
                            campaign's property. Updates to external entities
                            used in this campaign

                            are **not** registered by this property, such as
                            collection or coupon updates.
                        createdBy:
                          type: string
                          description: >-
                            Name of the user who created this campaign if
                            available.
                          example: John Doe
                        updatedBy:
                          type: string
                          description: >-
                            Name of the user who last updated this campaign if
                            available.
                          example: Jane Doe
                        templateId:
                          type: integer
                          description: >-
                            The ID of the Campaign Template this Campaign was
                            created from.
                          example: 3
                        frontendState:
                          type: string
                          description: >-
                            The campaign state displayed in the Campaign
                            Manager.
                          enum:
                            - expired
                            - scheduled
                            - running
                            - disabled
                            - archived
                            - staged
                          example: running
                        storesImported:
                          type: boolean
                          description: >-
                            Indicates whether the linked stores were imported
                            via a CSV file.
                          example: true
                        valueMapsIds:
                          type: array
                          description: A list of value map IDs for the campaign.
                          items:
                            type: integer
                          example:
                            - 100
                            - 215
                      required:
                        - state
                        - description
                        - type
                        - frontendState
                        - storesImported
                    - type: object
                      properties:
                        revisionFrontendState:
                          type: string
                          description: >-
                            The campaign revision state displayed in the
                            Campaign Manager.
                          enum:
                            - revised
                            - pending
                          example: revised
                        activeRevisionId:
                          type: integer
                          description: >
                            ID of the revision that was last activated on this
                            campaign.
                          example: 6
                        activeRevisionVersionId:
                          type: integer
                          description: >
                            ID of the revision version that is active on the
                            campaign.
                          example: 6
                        version:
                          type: integer
                          description: >
                            Incrementing number representing how many revisions
                            have been activated on this campaign, starts from 0
                            for a new campaign.
                          example: 6
                        currentRevisionId:
                          type: integer
                          description: >
                            ID of the revision currently being modified for the
                            campaign.
                          example: 6
                        currentRevisionVersionId:
                          type: integer
                          description: >
                            ID of the latest version applied on the current
                            revision.
                          example: 6
                        stageRevision:
                          type: boolean
                          description: >
                            Flag for determining whether we use current revision
                            when sending requests with staging API key.
                          example: false
                          default: false
              ruleFailureReasons:
                type: array
                items:
                  type: object
                  description: Details about why a rule failed.
                  required:
                    - campaignID
                    - campaignName
                    - rulesetID
                    - ruleIndex
                    - ruleName
                  properties:
                    campaignID:
                      type: integer
                      description: >-
                        The ID of the campaign that contains the rule that
                        failed.
                    campaignName:
                      type: string
                      description: >-
                        The name of the campaign that contains the rule that
                        failed.
                    rulesetID:
                      type: integer
                      description: >-
                        The ID of the ruleset that contains the rule that
                        failed.
                    couponID:
                      type: integer
                      description: >-
                        The ID of the coupon that was being evaluated at the
                        time of the rule failure.
                      example: 4928
                    couponValue:
                      type: string
                      description: >-
                        The code of the coupon that was being evaluated at the
                        time of the rule failure.
                    referralID:
                      type: integer
                      description: >-
                        The ID of the referral that was being evaluated at the
                        time of the rule failure.
                    referralValue:
                      type: string
                      description: >-
                        The code of the referral that was being evaluated at the
                        time of the rule failure.
                    ruleIndex:
                      type: integer
                      description: The index of the rule that failed within the ruleset.
                    ruleName:
                      type: string
                      description: The name of the rule that failed within the ruleset.
                    conditionIndex:
                      type: integer
                      description: The index of the condition that failed.
                    effectIndex:
                      type: integer
                      description: The index of the effect that failed.
                    details:
                      type: string
                      description: More details about the failure.
                    evaluationGroupID:
                      type: integer
                      example: 3
                      description: >-
                        The ID of the evaluation group. For more information,
                        see [Managing campaign
                        evaluation](https://docs.talon.one/docs/product/applications/managing-campaign-evaluation).
                    evaluationGroupMode:
                      type: string
                      example: stackable
                      description: >-
                        The evaluation mode of the evaluation group. For more
                        information, see [Managing campaign
                        evaluation](https://docs.talon.one/docs/product/applications/managing-campaign-
              awardedGiveaways:
                type: array
                items:
                  allOf:
                    - type: object
                      required:
                        - id
                        - created
                      properties:
                        id:
                          type: integer
                          description: The internal ID of this entity.
                          example: 6
                        created:
                          type: string
                          format: date-time
                          description: The time this entity was created.
                          example: '2020-06-10T09:05:27.993483Z'
                    - type: object
                      required:
                        - id
                        - created
                        - code
                        - poolId
                      properties:
                        code:
                          type: string
                          description: The code value of this giveaway.
                          example: GIVEAWAY1
                        poolId:
                          type: integer
                          description: The ID of the pool to return giveaway codes from.
                          example: 1
                        startDate:
                          format: date-time
                          description: Timestamp at which point the giveaway becomes valid.
                          type: string
                          example: 2022-01-02T15:04:05Z07:00
                        endDate:
                          format: date-time
                          description: >-
                            Timestamp at which point the giveaway becomes
                            invalid.
                          type: string
                          example: 2023-01-02T15:04:05Z07:00
                        attributes:
                          type: object
                          description: Arbitrary properties associated with this giveaway.
                        used:
                          type: boolean
                          description: >-
                            Indicates whether this giveaway code was given
                            before.
                          example: true
                        importId:
                          type: integer
                          description: The ID of the Import which created this giveaway.
                          example: 4
                        profileIntegrationId:
                          type: string
                          description: >-
                            The third-party integration ID of the customer
                            profile that was awarded the giveaway, if the
                            giveaway was awarded.
                          example: R195412
                        profileId:
                          type: integer
                          description: >-
                            The internal ID of the customer profile that was
                            awarded the giveaway, if the giveaway was awarded
                            and an internal ID exists.
                          example: 1
              effects:
                type: array
                description: >-
                  The effects generated by the rules in your running campaigns.
                  See [API
                  effects](https://docs.talon.one/docs/dev/integration-api/api-effects).
                items:
                  allOf:
                    - type: object
                      description: >-
                        Definition of all properties that are present on all
                        effects, independent of their type.
                      required:
                        - campaignId
                        - rulesetId
                        - ruleIndex
                        - ruleName
                        - effectType
                      properties:
                        campaignId:
                          type: integer
                          description: The ID of the campaign that triggered this effect.
                          example: 244
                        rulesetId:
                          type: integer
                          description: >-
                            The ID of the ruleset that was active in the
                            campaign when this effect was triggered.
                          example: 73
                        ruleIndex:
                          type: integer
                          description: >-
                            The position of the rule that triggered this effect
                            within the ruleset.
                          example: 2
                        ruleName:
                          type: string
                          description: The name of the rule that triggered this effect.
                          example: Give 20% discount
                        effectType:
                          type: string
                          description: >-
                            The type of effect that was triggered. See [API
                            effects](https://docs.talon.one/docs/dev/integration-api/api-effects).
                          example: rejectCoupon
                        triggeredByCoupon:
                          type: integer
                          example: 4928
                          description: >-
                            The ID of the coupon that was being evaluated when
                            this effect was triggered.
                        triggeredForCatalogItem:
                          type: integer
                          example: 786
                          description: >-
                            The ID of the catalog item that was being evaluated
                            when this effect was triggered.
                        conditionIndex:
                          type: integer
                          example: 786
                          description: The index of the condition that was triggered.
                        evaluationGroupID:
                          type: integer
                          example: 3
                          description: >-
                            The ID of the evaluation group. For more
                            information, see [Managing campaign
                            evaluation](https://docs.talon.one/docs/product/applications/managing-campaign-evaluation).
                        evaluationGroupMode:
                          type: string
                          example: stackable
                          description: >-
                            The evaluation mode of the evaluation group. For
                            more information, see [Managing campaign
                            evaluation](https://docs.talon.one/docs/product/applications/managing-campaign-evaluation).
                        campaignRevisionId:
                          type: integer
                          example: 1
                          description: >-
                            The revision ID of the campaign that was used when
                            triggering the effect.
                        campaignRevisionVersionId:
                          type: integer
                          example: 5
                          description: >-
                            The revision version ID of the campaign that was
                            used when triggering the effect.
                        selectedPriceType:
                          type: string
                          example: member
                          description: >-
                            The selected price type for the SKU targeted by this
                            effect.
                        selectedPrice:
                          type: number
                          example: 100
                          description: >-
                            The value of the selected price type to apply to the
                            SKU targeted by this effect, before any discounts
                            are applied.
                        adjustmentReferenceId:
                          type: string
                          format: uuid
                          example: 68851723-e6fa-488f-ace9-112581e6c19b
                          description: >-
                            The reference identifier of the selected price
                            adjustment for this SKU. This is only returned if
                            the `selectedPrice` resulted from a price
                            adjustment.
                    - type: object
                      description: >-
                        A generic effect that is fired by a triggered campaign.
                        The props property will contain information specific to
                        the specific effect type.
                      required:
                        - props
                      properties:
                        props:
                          oneOf:
                            - type: object
                              description: >-
                                The properties specific to the "acceptCoupon"
                                effect. This gets triggered whenever the coupon
                                is valid and all other conditions in the rules
                                of its campaign are met.
                              required:
                                - value
                              properties:
                                value:
                                  type: string
                                  description: The coupon code that was accepted.
                            - type: object
                              description: >-
                                The properties specific to the "acceptReferral"
                                effect. TThis gets triggered whenever the
                                referral code is valid and all other conditions
                                in the rules of its campaign are met.
                              required:
                                - value
                              properties:
                                value:
                                  type: string
                                  description: The referral code that was accepted.
                            - type: object
                              description: >
                                This effect is **deprecated**. The properties
                                specific to the "redeemReferral" effect.

                                This gets triggered whenever the referral code
                                is valid, and a rule was triggered that contains
                                a "redeem referral" effect.
                              required:
                                - id
                                - value
                              properties:
                                id:
                                  type: integer
                                  description: >-
                                    The id of the referral code that was
                                    redeemed.
                                value:
                                  type: string
                                  description: The referral code that was redeemed.
                            - type: object
                              description: >-
                                The properties specific to the "rejectCoupon"
                                effect. This gets triggered whenever the coupon
                                was rejected. See rejectionReason for more info
                                on why.
                              required:
                                - value
                                - rejectionReason
                              properties:
                                value:
                                  type: string
                                  description: The coupon code that was rejected.
                                rejectionReason:
                                  type: string
                                  description: The reason why this coupon was rejected.
                                conditionIndex:
                                  type: integer
                                  description: >-
                                    The index of the condition that caused the
                                    rejection of the coupon.
                                effectIndex:
                                  type: integer
                                  description: >-
                                    The index of the effect that caused the
                                    rejection of the coupon.
                                details:
                                  type: string
                                  description: More details about the failure.
                                campaignExclusionReason:
                                  type: string
                                  example: CampaignGaveLowerDiscount
                                  description: The reason why the campaign was not applied.
                            - type: object
                              description: >-
                                The properties specific to the "rejectReferral"
                                effect. This gets triggered whenever the
                                referral code was rejected. See rejectionReason
                                for more info on why.
                              required:
                                - value
                                - rejectionReason
                              properties:
                                value:
                                  type: string
                                  description: The referral code that was rejected.
                                rejectionReason:
                                  type: string
                                  description: >-
                                    The reason why this referral code was
                                    rejected.
                                conditionIndex:
                                  type: integer
                                  description: >-
                                    The index of the condition that caused the
                                    rejection of the referral.
                                effectIndex:
                                  type: integer
                                  description: >-
                                    The index of the effect that caused the
                                    rejection of the referral.
                                details:
                                  type: string
                                  description: More details about the failure.
                                campaignExclusionReason:
                                  type: string
                                  example: CampaignGaveLowerDiscount
                                  description: The reason why the campaign was not applied.
                            - type: object
                              description: >-
                                The properties specific to the "couponCreated"
                                effect. This gets triggered whenever a validated
                                rule contained a "create coupon" effect, and a
                                coupon was created for a customer. See
                                "createdCoupons" on the response for all details
                                of this coupon.
                              required:
                                - value
                                - profileId
                              properties:
                                value:
                                  type: string
                                  description: The coupon code that was created.
                                profileId:
                                  type: string
                                  description: >-
                                    The integration identifier of the customer
                                    for whom this coupon was created.
                            - type: object
                              description: >-
                                The properties specific to the "referralCreated"
                                effect. This gets triggered whenever a validated
                                rule contained a "create referral" effect, and a
                                referral code was created for a customer. See
                                "createdReferrals" on the response for all
                                details of this referral code.
                              required:
                                - value
                              properties:
                                value:
                                  type: string
                                  description: The referral code that was created.
                            - type: object
                              description: >-
                                The properties specific to the "setDiscount"
                                effect. This gets triggered whenever a validated
                                rule contained a "set discount" effect. This is
                                a discount that should be applied on the scope
                                of defined with it.
                              required:
                                - name
                                - value
                              properties:
                                name:
                                  type: string
                                  description: The name / description of this discount
                                value:
                                  type: number
                                  description: The total monetary value of the discount.
                                scope:
                                  type: string
                                  description: >-
                                    The scope which the discount was applied on,
                                    can be one of
                                    (cartItems,additionalCosts,sessionTotal).
                                desiredValue:
                                  type: number
                                  description: The original value of the discount.
                            - type: object
                              description: >
                                The properties specific to the
                                `setDiscountPerItem` effect, triggered whenever
                                a validated rule contained a

                                "set per item discount" effect.

                                This is a discount that will be applied either
                                on a specific item, on a specific item +
                                additional cost or on all additional costs per
                                item.

                                This depends on the chosen scope.
                              required:
                                - name
                                - value
                                - position
                              properties:
                                name:
                                  type: string
                                  description: >
                                    The name of the discount. Contains a hashtag
                                    character indicating the index of the
                                    position of the item the discount applies

                                    to. It is identical to the value of the
                                    `position` property.
                                value:
                                  type: number
                                  description: The total monetary value of the discount.
                                position:
                                  type: number
                                  description: >-
                                    The index of the item in the cart items list
                                    on which this discount should be applied.
                                subPosition:
                                  type: number
                                  description: >
                                    For cart items with `quantity` > 1, the sub
                                    position indicates which item the discount
                                    applies to.
                                desiredValue:
                                  type: number
                                  description: The original value of the discount.
                                scope:
                                  type: string
                                  description: >
                                    The scope of the discount:

                                    - `additionalCosts`: The discount applies to
                                    all the additional costs of the item.

                                    - `itemTotal`: The discount applies to the
                                    price of the item + the additional costs of
                                    the item.

                                    - `price`: The discount applies to the price
                                    of the item.
                                totalDiscount:
                                  type: number
                                  description: >-
                                    The total discount given if this effect is a
                                    result of a prorated discount.
                                desiredTotalDiscount:
                                  type: number
                                  description: >-
                                    The original total discount to give if this
                                    effect is a result of a prorated discount.
                                bundleIndex:
                                  type: integer
                                  description: >-
                                    The position of the bundle in a list of item
                                    bundles created from the same bundle
                                    definition.
                                bundleName:
                                  type: string
                                  description: The name of the bundle definition.
                                targetedItemPosition:
                                  type: number
                                  description: >-
                                    The index of the targeted bundle item on
                                    which the applied discount is based.
                                targetedItemSubPosition:
                                  type: number
                                  description: >
                                    The sub-position of the targeted bundle item
                                    on which the applied discount is based.
                            - type: object
                              description: >-
                                The properties specific to the
                                "setDiscountPerAdditionalCost" effect. This gets
                                triggered whenever a validated rule contained a
                                "set per additional cost discount" effect. This
                                is a discount that should be applied on a
                                specific additional cost.
                              required:
                                - name
                                - value
                                - additionalCostId
                                - additionalCost
                              properties:
                                name:
                                  type: string
                                  description: The name / description of this discount
                                additionalCostId:
                                  type: integer
                                  description: The ID of the additional cost.
                                additionalCost:
                                  type: string
                                  description: The name of the additional cost.
                                value:
                                  type: number
                                  description: The total monetary value of the discount.
                                desiredValue:
                                  type: number
                                  description: The original value of the discount.
                            - type: object
                              description: >-
                                The properties specific to the "triggerWebhook"
                                effect. This gets triggered whenever a validated
                                rule contained a "trigger webhook" effect. This
                                is communicated as an FYI and should usually not
                                require action on your side.
                              required:
                                - webhookId
                                - webhookName
                              properties:
                                webhookId:
                                  type: number
                                  description: The ID of the webhook that was triggered.
                                webhookName:
                                  type: string
                                  description: The name of the webhook that was triggered.
                            - type: object
                              description: >
                                The properties specific to the
                                "addLoyaltyPoints" effect. This gets triggered
                                whenever a validated rule contained an "add
                                loyalty" effect. These points are automatically
                                stored and managed inside Talon.One.
                              required:
                                - name
                                - programId
                                - subLedgerId
                                - value
                                - recipientIntegrationId
                                - transactionUUID
                              properties:
                                name:
                                  type: string
                                  description: >-
                                    The name / description of this loyalty point
                                    addition.
                                programId:
                                  type: integer
                                  description: >-
                                    The ID of the loyalty program where these
                                    points were added.
                                subLedgerId:
                                  type: string
                                  description: >-
                                    The ID of the subledger within the loyalty
                                    program where these points were added.
                                value:
                                  type: number
                                  description: The amount of points that were added.
                                desiredValue:
                                  type: number
                                  description: >-
                                    The original amount of loyalty points to be
                                    awarded.
                                recipientIntegrationId:
                                  type: string
                                  maxLength: 1000
                                  description: The user for whom these points were added.
                                  example: URNGV8294NV
                                startDate:
                                  type: string
                                  format: date-time
                                  description: Date after which points will be valid.
                                expiryDate:
                                  type: string
                                  format: date-time
                                  description: Date after which points will expire.
                                transactionUUID:
                                  type: string
                                  description: >-
                                    The identifier of this addition in the
                                    loyalty ledger.
                                cartItemPosition:
                                  type: number
                                  description: >-
                                    The index of the item in the cart items list
                                    on which the loyal points addition should be
                                    applied.
                                cartItemSubPosition:
                                  type: number
                                  description: >
                                    For cart items with `quantity` > 1, the sub
                                    position indicates to which item the loyalty
                                    points addition is applied.
                                cardIdentifier:
                                  description: The card on which these points were added.
                                  type: string
                                  maxLength: 108
                                  pattern: ^[A-Za-z0-9_-]*$
                                  example: summer-loyalty-card-0543
                                bundleIndex:
                                  type: integer
                                  description: >-
                                    The position of the bundle in a list of item
                                    bundles created from the same bundle
                                    definition.
                                bundleName:
                                  type: string
                                  description: The name of the bundle definition.
                            - type: object
                              description: >-
                                The properties specific to the
                                "deductLoyaltyPoints" effect. This gets
                                triggered whenever a validated rule contained a
                                condition to only trigger when the given number
                                of loyalty points could be deduced. These points
                                are automatically stored and managed inside
                                Talon.One.
                              required:
                                - ruleTitle
                                - programId
                                - subLedgerId
                                - value
                                - transactionUUID
                                - name
                              properties:
                                ruleTitle:
                                  type: string
                                  description: >-
                                    The title of the rule that contained
                                    triggered this points deduction.
                                programId:
                                  type: integer
                                  description: >-
                                    The ID of the loyalty program where these
                                    points were added.
                                subLedgerId:
                                  type: string
                                  description: >-
                                    The ID of the subledger within the loyalty
                                    program where these points were added.
                                value:
                                  type: number
                                  description: The amount of points that were deducted.
                                transactionUUID:
                                  type: string
                                  description: >-
                                    The identifier of this deduction in the
                                    loyalty ledger.
                                name:
                                  type: string
                                  description: >
                                    The name property gets one of the following
                                    two values. It can be the loyalty program
                                    name or it can represent a reason for the
                                    respective deduction of loyalty points. The
                                    latter is an optional value defined in a
                                    deduction rule.
                                cardIdentifier:
                                  description: The card on which these points were added.
                                  type: string
                                  maxLength: 108
                                  pattern: ^[A-Za-z0-9_-]*$
                                  example: summer-loyalty-card-0543
                            - type: object
                              description: >
                                The properties specific to the
                                "changeLoyaltyTierLevel" effect.

                                This is triggered whenever the user's loyalty
                                tier is upgraded due to a validated rule that
                                contained an "addLoyaltyPoints" effect.
                              required:
                                - ruleTitle
                                - programId
                                - subLedgerId
                                - newTierName
                              properties:
                                ruleTitle:
                                  type: string
                                  description: >-
                                    The title of the rule that triggered the
                                    tier upgrade.
                                programId:
                                  type: integer
                                  description: >-
                                    The ID of the loyalty program where these
                                    points were added.
                                subLedgerId:
                                  type: string
                                  description: >-
                                    The ID of the subledger within the loyalty
                                    program where these points were added.
                                previousTierName:
                                  type: string
                                  description: >-
                                    The name of the tier from which the user was
                                    upgraded.
                                newTierName:
                                  type: string
                                  description: >-
                                    The name of the tier to which the user has
                                    been upgraded.
                                expiryDate:
                                  type: string
                                  format: date-time
                                  description: The expiration date of the new tier.
                            - type: object
                              description: >-
                                The properties specific to the "addFreeItem"
                                effect. This gets triggered whenever a validated
                                rule contained an "add free item" effect.
                              required:
                                - sku
                                - name
                              properties:
                                sku:
                                  type: string
                                  description: SKU of the item that needs to be added.
                                  example: SKU1241028
                                name:
                                  type: string
                                  description: The name / description of the effect
                                desiredQuantity:
                                  type: integer
                                  description: >-
                                    The original quantity in case a partial
                                    reward was applied.
                            - type: object
                              description: >-
                                The properties specific to the
                                "showNotification" effect. This gets triggered
                                whenever a validated rule contained a "show
                                notification" effect.
                              required:
                                - notificationType
                                - title
                                - body
                              properties:
                                notificationType:
                                  type: string
                                  description: >-
                                    The type of notification that should be
                                    shown (e.g. error/warning/info).
                                title:
                                  type: string
                                  description: Title of the notification.
                                body:
                                  type: string
                                  description: Body of the notification.
                            - type: object
                              description: >-
                                The properties specific to the "updateAttribute"
                                effect. This gets triggered whenever a validated
                                rule contained an "update an attribute" effect.
                              required:
                                - path
                                - value
                              properties:
                                path:
                                  type: string
                                  description: >-
                                    The exact path of the attribute that was
                                    updated.
                                value:
                                  description: >
                                    The new value of this attribute. The value
                                    can be of the following types:

                                    - boolean

                                    - location

                                    - number

                                    - string

                                    - time

                                    - list of any of those types
                            - type: object
                              description: >-
                                The properties specific to the "rollbackCoupon"
                                effect. This gets triggered whenever previously
                                closed session is now cancelled and a coupon
                                redemption was cancelled on our internal usage
                                limit counters.
                              required:
                                - value
                              properties:
                                value:
                                  type: string
                                  description: >-
                                    The coupon code whose usage has been rolled
                                    back.
                            - type: object
                              description: >-
                                The properties specific to the
                                "rollbackReferral" effect. This gets triggered
                                whenever previously closed session is now
                                cancelled and a referral redemption was
                                cancelled on our internal usage limit counters.
                              required:
                                - value
                              properties:
                                value:
                                  type: string
                                  description: >-
                                    The referral code whose usage has been
                                    rolled back.
                            - type: object
                              description: >-
                                The properties specific to the
                                "rollbackDiscount" effect. This gets triggered
                                whenever previously closed session is now
                                cancelled or partially returned and a
                                setDiscount effect was cancelled on our internal
                                discount limit counters.
                              required:
                                - name
                                - value
                              properties:
                                name:
                                  type: string
                                  description: >-
                                    The name of the "setDiscount" effect that
                                    was rolled back.
                                value:
                                  type: number
                                  description: >-
                                    The value of the discount that was rolled
                                    back.
                                cartItemPosition:
                                  type: number
                                  description: >-
                                    The index of the item in the cart items for
                                    which the discount was rolled back.
                                cartItemSubPosition:
                                  type: number
                                  description: >
                                    For cart items with `quantity` > 1, the
                                    subposition returns the index of the item
                                    unit in its line item.
                                additionalCostId:
                                  type: integer
                                  description: >-
                                    The ID of the additional cost that was
                                    rolled back.
                                additionalCost:
                                  type: string
                                  description: >-
                                    The name of the additional cost that was
                                    rolled back.
                                scope:
                                  type: string
                                  description: >
                                    The scope of the rolled back discount

                                    - For a discount per session, it can be one
                                    of `cartItems`, `additionalCosts` or
                                    `sessionTotal`

                                    - For a discount per item, it can be one of
                                    `price`, `additionalCosts` or `itemTotal`
                            - type: object
                              description: >-
                                The properties specific to the
                                "rollbackAddedLoyaltyPoints" effect. This gets
                                triggered whenever previously a closed session
                                with an addLoyaltyPoints effect is cancelled.
                              required:
                                - programId
                                - subLedgerId
                                - value
                                - recipientIntegrationId
                                - transactionUUID
                              properties:
                                programId:
                                  type: integer
                                  description: >-
                                    The ID of the loyalty program where the
                                    points were originally added.
                                subLedgerId:
                                  type: string
                                  description: >-
                                    The ID of the subledger within the loyalty
                                    program where these points were originally
                                    added.
                                value:
                                  type: number
                                  description: The amount of points that were rolled back.
                                recipientIntegrationId:
                                  type: string
                                  maxLength: 1000
                                  description: >-
                                    The user for whom these points were
                                    originally added.
                                  example: URNGV8294NV
                                transactionUUID:
                                  type: string
                                  description: >-
                                    The identifier of 'deduction' entry added to
                                    the ledger as the `addLoyaltyPoints` effect
                                    is rolled back.
                                cartItemPosition:
                                  type: number
                                  description: >-
                                    The index of the item in the cart items for
                                    which the loyalty points were rolled back.
                                cartItemSubPosition:
                                  type: number
                                  description: >
                                    For cart items with `quantity` > 1, the
                                    sub-position indicates to which item the
                                    loyalty points were rolled back.
                                cardIdentifier:
                                  description: >-
                                    The card on which these points were
                                    originally added.
                                  type: string
                                  maxLength: 108
                                  pattern: ^[A-Za-z0-9_-]*$
                                  example: summer-loyalty-card-0543
                            - type: object
                              description: >-
                                The properties specific to the
                                "rollbackDeductedLoyaltyPoints" effect. This
                                effect is triggered whenever a previously closed
                                session is cancelled and a deductLoyaltyPoints
                                effect was revoked.
                              required:
                                - programId
                                - subLedgerId
                                - value
                                - recipientIntegrationId
                                - transactionUUID
                              properties:
                                programId:
                                  type: integer
                                  description: >-
                                    The ID of the loyalty program where these
                                    points were reimbursed.
                                subLedgerId:
                                  type: string
                                  description: >-
                                    The ID of the subledger within the loyalty
                                    program where these points were reimbursed.
                                value:
                                  type: number
                                  description: >-
                                    The amount of reimbursed points that were
                                    added.
                                recipientIntegrationId:
                                  type: string
                                  maxLength: 1000
                                  description: >-
                                    The user for whom these points were
                                    reimbursed.
                                  example: URNGV8294NV
                                startDate:
                                  type: string
                                  format: date-time
                                  description: >-
                                    Date after which the reimbursed points will
                                    be valid.
                                expiryDate:
                                  type: string
                                  format: date-time
                                  description: >-
                                    Date after which the reimbursed points will
                                    expire.
                                transactionUUID:
                                  type: string
                                  description: >-
                                    The identifier of 'addition' entries added
                                    to the ledger as the `deductLoyaltyPoints`
                                    effect is rolled back.
                                cardIdentifier:
                                  description: The card on which these points were added.
                                  type: string
                                  maxLength: 108
                                  pattern: ^[A-Za-z0-9_-]*$
                                  example: summer-loyalty-card-0543
                            - type: object
                              description: >
                                This effect is **deprecated**.

                                The properties specific to the
                                "ShowBundleMetadata" effect. This effect
                                contains information that allows you to
                                associate the discounts from a rule in a bundle
                                campaign with specific cart items. This way you
                                can distinguish from "normal" discounts that
                                were not the result of a product bundle.
                              required:
                                - description
                                - bundleAttributes
                                - itemsIndices
                              properties:
                                description:
                                  type: string
                                  description: Description of the product bundle.
                                bundleAttributes:
                                  type: array
                                  items:
                                    type: string
                                  description: >-
                                    The cart item attributes that determined
                                    which items are being bundled together.
                                itemsIndices:
                                  type: array
                                  items:
                                    type: number
                                  description: >-
                                    The indices in the cart items array of the
                                    bundled items.
                            - type: object
                              description: >-
                                The properties specific to the "awardGiveaway"
                                effect. This effect contains information on the
                                giveaway item, and which profile it was awarded
                                to.
                              required:
                                - poolId
                                - poolName
                                - recipientIntegrationId
                                - giveawayId
                                - code
                              properties:
                                poolId:
                                  type: integer
                                  description: >-
                                    The ID of the giveaways pool the code was
                                    taken from.
                                  example: 2
                                poolName:
                                  type: string
                                  description: >-
                                    The name of the giveaways pool the code was
                                    taken from.
                                  example: My pool
                                recipientIntegrationId:
                                  type: string
                                  maxLength: 1000
                                  description: >-
                                    The integration ID of the profile that was
                                    awarded the giveaway.
                                  example: URNGV8294NV
                                giveawayId:
                                  type: integer
                                  description: >-
                                    The internal ID for the giveaway that was
                                    awarded.
                                  example: 5
                                code:
                                  type: string
                                  description: The giveaway code that was awarded.
                                  example: 57638t-67439hty
                            - type: object
                              description: >-
                                The properties specific to the "awardGiveaway"
                                effect when the session is not closed yet. This
                                effect replaces "awardGiveaway" only when
                                updating a session with any state other than
                                "closed". This is to ensure no giveaway codes
                                are leaked when they are still not guaranteed to
                                be awarded.
                              required:
                                - poolId
                                - poolName
                                - recipientIntegrationId
                              properties:
                                poolId:
                                  type: integer
                                  description: >-
                                    The ID of the giveaways pool the code will
                                    be taken from.
                                  example: 2
                                poolName:
                                  type: string
                                  description: >-
                                    The name of the giveaways pool the code will
                                    be taken from.
                                  example: My pool
                                recipientIntegrationId:
                                  type: string
                                  maxLength: 1000
                                  description: >-
                                    The integration ID of the profile that will
                                    be awarded the giveaway.
                                  example: URNGV8294NV
                            - type: object
                              description: >-
                                Whenever an error occurred during evaluation, we
                                return an error effect. This should never happen
                                for rules created in the rule builder.
                              required:
                                - message
                              properties:
                                message:
                                  type: string
                                  description: The error message.
                            - type: object
                              description: Effect containing custom payload.
                              required:
                                - effectId
                                - name
                                - payload
                              properties:
                                effectId:
                                  type: integer
                                  description: >-
                                    The ID of the custom effect that was
                                    triggered.
                                  example: 1
                                name:
                                  type: string
                                  description: The type of the custom effect.
                                  example: my_custom_effect
                                cartItemPosition:
                                  type: number
                                  description: >-
                                    The index of the item in the cart item list
                                    to which the custom effect is applied.
                                  example: 1
                                cartItemSubPosition:
                                  type: number
                                  description: >
                                    For cart items with quantity > 1, the sub
                                    position indicates to which item unit the
                                    custom effect is applied.
                                  example: 2
                                bundleIndex:
                                  type: integer
                                  description: >-
                                    The position of the bundle in a list of item
                                    bundles created from the same bundle
                                    definition.
                                  example: 1
                                bundleName:
                                  type: string
                                  description: The name of the bundle definition.
                                  example: my_bundle
                                payload:
                                  description: The JSON payload of the custom effect.
                                  type: object
                                  x-arbitraryJSON: true
                            - type: object
                              description: >-
                                The properties specific to the
                                "setDiscountPerAdditionalCostPerItem" effect.
                                This gets triggered whenever a validated rule
                                contained a "set discount per additional cost
                                per item" effect. This is a discount that should
                                be applied on a specific additional cost in a
                                specific item.
                              required:
                                - name
                                - value
                                - additionalCostId
                                - additionalCost
                                - position
                              properties:
                                name:
                                  type: string
                                  description: The name / description of this discount
                                additionalCostId:
                                  type: integer
                                  description: The ID of the additional cost.
                                value:
                                  type: number
                                  description: The total monetary value of the discount.
                                position:
                                  type: number
                                  description: >-
                                    The index of the item in the cart item list
                                    containing the additional cost to be
                                    discounted.
                                subPosition:
                                  type: number
                                  description: >
                                    For cart items with `quantity` > 1, the sub
                                    position indicates which item the discount
                                    applies to.
                                additionalCost:
                                  type: string
                                  description: The name of the additional cost.
                                desiredValue:
                                  type: number
                                  description: >
                                    Only with [partial discounts
                                    enabled](https://docs.talon.one/docs/product/campaigns/campaign-evaluation/#partial-discounts).

                                    Represents the monetary value of the
                                    discount to be applied to additional
                                    discount without considering budget
                                    limitations.
                            - type: object
                              description: >-
                                The properties specific to the "reserveCoupon"
                                effect. This gets triggered whenever a validated
                                rule contained a "reserve coupon" effect. This
                                reserves the coupon currently on scope to the
                                profile on scope.
                              required:
                                - couponValue
                                - profileIntegrationId
                                - isNewReservation
                              properties:
                                couponValue:
                                  type: string
                                  description: The value of the coupon currently on scope.
                                profileIntegrationId:
                                  type: string
                                  description: >-
                                    The ID of this customer profile in the
                                    third-party integration.
                                isNewReservation:
                                  type: boolean
                                  description: >-
                                    Indicates whether this is a new coupon
                                    reservation or not.
                            - type: object
                              description: >-
                                The properties specific to the "addToAudience"
                                effect. This gets triggered whenever a validated
                                rule contains an "addToAudience" effect.
                              properties:
                                audienceId:
                                  type: integer
                                  description: The internal ID of the audience.
                                  example: 10
                                audienceName:
                                  type: string
                                  description: The name of the audience.
                                  example: My audience
                                profileIntegrationId:
                                  type: string
                                  description: >-
                                    The ID of the customer profile in the
                                    third-party integration platform.
                                  example: URNGV8294NV
                                profileId:
                                  type: integer
                                  description: The internal ID of the customer profile.
                                  example: 150
                            - type: object
                              description: >-
                                The properties specific to the
                                "removeFromAudience" effect. This gets triggered
                                whenever a validated rule contains a
                                "removeFromAudience" effect.
                              properties:
                                audienceId:
                                  type: integer
                                  description: The internal ID of the audience.
                                  example: 10
                                audienceName:
                                  type: string
                                  description: The name of the audience.
                                  example: My audience
                                profileIntegrationId:
                                  type: string
                                  description: >-
                                    The ID of the customer profile in the
                                    third-party integration platform.
                                  example: URNGV8294NV
                                profileId:
                                  type: integer
                                  description: The internal ID of the customer profile.
                                  example: 150
                            - type: object
                              description: >-
                                The properties specific to the
                                "increaseAchievementProgress" effect. This gets
                                triggered whenever a validated rule contained an
                                "increase customer progress" effect.
                              required:
                                - achievementId
                                - achievementName
                                - delta
                                - value
                                - target
                                - isJustCompleted
                              properties:
                                achievementId:
                                  type: integer
                                  description: The internal ID of the achievement.
                                  example: 10
                                achievementName:
                                  type: string
                                  description: The name of the achievement.
                                  example: FreeCoffee10Orders
                                progressTrackerId:
                                  type: integer
                                  description: >-
                                    The internal ID of the achievement progress
                                    tracker.
                                delta:
                                  type: number
                                  description: >-
                                    The value by which the customer's current
                                    progress in the achievement is increased.
                                value:
                                  type: number
                                  description: >-
                                    The current progress of the customer in the
                                    achievement.
                                target:
                                  type: number
                                  description: >-
                                    The target value to complete the
                                    achievement.
                                isJustCompleted:
                                  type: boolean
                                  description: >-
                                    Indicates if the customer has completed the
                                    achievement in the current session.
                            - type: object
                              description: >-
                                The properties specific to the
                                "rollbackIncreasedAchievementProgress" effect.
                                This gets triggered whenever a closed session
                                where the `increaseAchievementProgress` effect
                                was triggered is cancelled. This is applicable
                                only when the customer has not completed the
                                achievement.
                              required:
                                - achievementId
                                - achievementName
                                - progressTrackerId
                                - decreaseProgressBy
                                - currentProgress
                                - target
                              properties:
                                achievementId:
                                  type: integer
                                  description: The internal ID of the achievement.
                                  example: 10
                                achievementName:
                                  type: string
                                  description: The name of the achievement.
                                  example: FreeCoffee10Orders
                                progressTrackerId:
                                  type: integer
                                  description: >-
                                    The internal ID of the achievement progress
                                    tracker.
                                decreaseProgressBy:
                                  type: number
                                  description: >-
                                    The value by which the customer's current
                                    progress in the achievement is decreased.
                                currentProgress:
                                  type: number
                                  description: >-
                                    The current progress of the customer in the
                                    achievement.
                                target:
                                  type: number
                                  description: >-
                                    The target value to complete the
                                    achievement.
                            - type: object
                              description: >
                                The properties specific to the
                                "extendLoyaltyPointsExpiryDate" effect. This
                                gets triggered when a validated rule contains
                                the "extend expiry date" effect. The current
                                expiry date gets extended by the time frame
                                given in the effect.
                              required:
                                - programId
                                - subLedgerId
                                - extensionDuration
                                - previousExpirationDate
                              properties:
                                programId:
                                  type: integer
                                  description: >-
                                    ID of the loyalty program that contains
                                    these points.
                                subLedgerId:
                                  type: string
                                  description: >-
                                    API name of the loyalty program subledger
                                    that contains these points. added.
                                extensionDuration:
                                  type: string
                                  description: >
                                    Time frame by which the expiry date extends.


                                    The time format is either:

                                    - immediate, or

                                    - an **integer** followed by a letter
                                    indicating the time unit.


                                    Examples: `immediate`, `30s`, `40m`, `1h`,
                                    `5D`, `7W`, `10M`, `15Y`.


                                    Available units:


                                    - `s`: seconds

                                    - `m`: minutes

                                    - `h`: hours

                                    - `D`: days

                                    - `W`: weeks

                                    - `M`: months

                                    - `Y`: years


                                    You can round certain units up or down:

                                    - `_D` for rounding down days only.
                                    Signifies the start of the day.

                                    - `_U` for rounding up days, weeks, months
                                    and years. Signifies the end of the day,
                                    week, month or year.
                                  example: 12h
                                affectedTransactions:
                                  type: array
                                  description: >-
                                    List of transactions affected by the expiry
                                    date update.
                                  items:
                                    type: object
                                    description: >-
                                      The properties specific to effects for
                                      changing the expiry dates of loyalty
                                      ledger entries.
                                    required:
                                      - transactionUUID
                                      - newExpiryDate
                                    properties:
                                      transactionUUID:
                                        type: string
                                        format: uuid
                                        description: >-
                                          The identifier of the transaction
                                          affected by the extension or update.
                                      previousExpiryDate:
                                        type: string
                                        format: date-time
                                        description: >-
                                          Expiry date of the transactions before
                                          applying the extension or update.
                                      newExpiryDate:
                                        type: string
                                        format: date-time
                                        description: >-
                                          Expiry date of the transaction after
                                          applying the extension or update.
              createdCoupons:
                type: array
                items:
                  allOf:
                    - type: object
                      required:
                        - id
                        - created
                      properties:
                        id:
                          type: integer
                          description: The internal ID of the coupon.
                          example: 6
                        created:
                          type: string
                          format: date-time
                          description: The time the coupon was created.
                          example: '2020-06-10T09:05:27.993483Z'
                    - type: object
                      required:
                        - campaignId
                      properties:
                        campaignId:
                          type: integer
                          title: Campaign ID
                          description: The ID of the campaign that owns this entity.
                          example: 211
                    - type: object
                      properties:
                        value:
                          type: string
                          title: Coupon Code
                          description: The coupon code.
                          minLength: 4
                          example: XMAS-20-2021
                    - type: object
                      properties:
                        usageLimit:
                          type: integer
                          minimum: 0
                          maximum: 999999
                          example: 100
                          description: >
                            The number of times the coupon code can be redeemed.
                            `0` means unlimited redemptions but any campaign
                            usage limits will still apply.
                        discountLimit:
                          type: number
                          minimum: 0
                          maximum: 1000000000000000
                          example: 30
                          description: >
                            The total discount value that the code can give.
                            Typically used to represent a gift card value.
                        reservationLimit:
                          type: integer
                          minimum: 0
                          maximum: 999999
                          example: 45
                          description: >
                            The number of reservations that can be made with
                            this coupon code.
                        startDate:
                          type: string
                          format: date-time
                          example: '2020-01-24T14:15:22Z'
                          description: Timestamp at which point the coupon becomes valid.
                        expiryDate:
                          type: string
                          format: date-time
                          example: '2023-08-24T14:15:22Z'
                          description: >-
                            Expiration date of the coupon. Coupon never expires
                            if this is omitted.
                    - type: object
                      properties:
                        limits:
                          type: array
                          description: >
                            Limits configuration for a coupon. These limits will
                            override the limits

                            set from the campaign.


                            **Note:** Only usable when creating a single coupon
                            which is not tied to a specific recipient.

                            Only per-profile limits are allowed to be
                            configured.
                          items:
                            type: object
                            required:
                              - action
                              - limit
                              - entities
                            properties:
                              action:
                                type: string
                                description: >
                                  The limitable action to which this limit
                                  applies. For example:

                                  - `setDiscount`

                                  - `setDiscountEffect`

                                  - `redeemCoupon`

                                  - `createCoupon`
                                example: createCoupon
                              limit:
                                type: number
                                minimum: 0
                                example: 1000
                                description: The value to set for the limit.
                              period:
                                description: The period on which the budget limit recurs.
                                type: string
                                enum:
                                  - daily
                                  - weekly
                                  - monthly
                                  - yearly
                                example: yearly
                              entities:
                                type: array
                                description: The entity that this limit applies to.
                                example:
                                  - Coupon
                                items:
                                  type: string
                                  enum:
                                    - Coupon
                                    - Referral
                                    - Profile
                                    - Identifier
                                    - Store
                                    - Session
                    - type: object
                      required:
                        - value
                        - usageCounter
                        - usageLimit
                      properties:
                        usageCounter:
                          type: integer
                          title: Total coupon redemptions
                          example: 10
                          description: >-
                            The number of times the coupon has been successfully
                            redeemed.
                        discountCounter:
                          type: number
                          title: Discounts Given
                          description: >-
                            The amount of discounts given on rules redeeming
                            this coupon. Only usable if a coupon discount budget
                            was set for this coupon.
                          example: 10
                        discountRemainder:
                          type: number
                          title: Coupon Discount Remainder
                          description: The remaining discount this coupon can give.
                          example: 5
                        reservationCounter:
                          type: number
                          title: Number of reservations
                          description: The number of times this coupon has been reserved.
                          example: 1
                        attributes:
                          type: object
                          title: Attributes of coupon
                          description: Custom attributes associated with this coupon.
                        referralId:
                          type: integer
                          title: Advocate ID
                          description: >-
                            The integration ID of the referring customer (if
                            any) for whom this coupon was created as an effect.
                          example: 326632952
                        recipientIntegrationId:
                          title: Recipient ID
                          example: URNGV8294NV
                          type: string
                          maxLength: 1000
                          description: >-
                            The Integration ID of the customer that is allowed
                            to redeem this coupon.
                        importId:
                          title: Import ID
                          type: integer
                          description: The ID of the Import which created this coupon.
                          example: 4
                        reservation:
                          title: Reservation Type
                          type: boolean
                          example: false
                          description: >
                            Defines the reservation type:

                            - `true`: The coupon can be reserved for multiple
                            customers.

                            - `false`: The coupon can be reserved only for one
                            customer. It is a personal code.
                          default: true
                        batchId:
                          title: Batch ID
                          type: string
                          description: The id of the batch the coupon belongs to.
                          example: 32535-43255
                        isReservationMandatory:
                          title: Is reservation mandatory
                          type: boolean
                          example: false
                          description: >-
                            An indication of whether the code can be redeemed
                            only if it has been reserved first.
                          default: false
                        implicitlyReserved:
                          title: Is coupon implicitly reserved for all customers
                          description: >-
                            An indication of whether the coupon is implicitly
                            reserved for all customers.
                          type: boolean
                          example: false
              createdReferrals:
                type: array
                items:
                  allOf:
                    - type: object
                      required:
                        - id
                        - created
                      properties:
                        id:
                          type: integer
                          description: The internal ID of this entity.
                          example: 6
                        created:
                          type: string
                          format: date-time
                          description: The time this entity was created.
                          example: '2020-06-10T09:05:27.993483Z'
                    - allOf:
                        - type: object
                          properties:
                            startDate:
                              type: string
                              format: date-time
                              title: Referral code valid from
                              description: >-
                                Timestamp at which point the referral code
                                becomes valid.
                              example: '2020-11-10T23:00:00Z'
                            expiryDate:
                              type: string
                              format: date-time
                              title: Referral code valid until
                              description: >-
                                Expiration date of the referral code. Referral
                                never expires if this is omitted.
                              example: '2021-11-10T23:00:00Z'
                            usageLimit:
                              type: integer
                              title: Referral code Usage Limit
                              description: >
                                The number of times a referral code can be used.
                                `0` means no limit but any campaign usage limits
                                will still apply.
                              minimum: 0
                              maximum: 999999
                              example: 1
                        - type: object
                          required:
                            - campaignId
                            - advocateProfileIntegrationId
                          properties:
                            campaignId:
                              type: integer
                              title: Referral's Campaign ID
                              description: >-
                                ID of the campaign from which the referral
                                received the referral code.
                              example: 78
                            advocateProfileIntegrationId:
                              type: string
                              title: Advocate's Profile ID
                              description: The Integration ID of the Advocate's Profile.
                              maxLength: 1000
                              example: URNGV8294NV
                            friendProfileIntegrationId:
                              type: string
                              title: Friend's Profile ID
                              description: >-
                                An optional Integration ID of the Friend's
                                Profile.
                              example: BZGGC2454PA
                            attributes:
                              type: object
                              description: Arbitrary properties associated with this item.
                              example:
                                channel: web
                    - type: object
                      properties:
                        importId:
                          type: integer
                          description: The ID of the Import which created this referral.
                          example: 4
                    - type: object
                      required:
                        - code
                        - usageCounter
                        - usageLimit
                      properties:
                        code:
                          type: string
                          title: Referral code
                          description: The referral code.
                          minLength: 4
                          example: 27G47Y54VH9L
                        usageCounter:
                          type: integer
                          title: Referral code Usages
                          description: >-
                            The number of times this referral code has been
                            successfully used.
                          example: 1
                        batchId:
                          type: string
                          title: Batch ID
                          description: The ID of the batch the referrals belong to.
                          example: tqyrgahe
    '400':
      description: Bad request
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
              errors:
                type: array
                description: >-
                  An array of individual problems encountered during the
                  request.
                items:
                  type: object
                  required:
                    - source
                    - title
                  properties:
                    title:
                      type: string
                      description: Short description of the problem.
                    details:
                      type: string
                      description: >-
                        Longer description of this specific instance of the
                        problem.
                    source:
                      type: object
                      description: >
                        The source of the current error, exactly one of
                        `pointer`, `parameter` or `line` will be defined.
                      properties:
                        pointer:
                          type: string
                          description: >-
                            Pointer to the path in the payload that caused this
                            error.
                        parameter:
                          type: string
                          description: Query parameter that caused this error.
                        line:
                          type: string
                          description: >-
                            Line number in uploaded multipart file that caused
                            this error. 'N/A' if unknown.
                        resource:
                          type: string
                          description: Pointer to the resource that caused this error.
              StatusCode:
                type: integer
                description: The error code
    '401':
      description: Unauthorized - Invalid API key
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
              errors:
                type: array
                description: >-
                  An array of individual problems encountered during the
                  request.
                items:
                  type: object
                  required:
                    - source
                    - title
                  properties:
                    title:
                      type: string
                      description: Short description of the problem.
                    details:
                      type: string
                      description: >-
                        Longer description of this specific instance of the
                        problem.
                    source:
                      type: object
                      description: >
                        The source of the current error, exactly one of
                        `pointer`, `parameter` or `line` will be defined.
                      properties:
                        pointer:
                          type: string
                          description: >-
                            Pointer to the path in the payload that caused this
                            error.
                        parameter:
                          type: string
                          description: Query parameter that caused this error.
                        line:
                          type: string
                          description: >-
                            Line number in uploaded multipart file that caused
                            this error. 'N/A' if unknown.
                        resource:
                          type: string
                          description: Pointer to the resource that caused this error.
              StatusCode:
                type: integer
                description: The error code
    '409':
      description: >-
        Too many requests or limit reached - Avoid parallel requests. See the
        [docs](https://docs.talon.one/docs/dev/tutorials/integrating-talon-one#managing-parallel-requests).
      content:
        application/json:
          schema:
            properties:
              message:
                type: string
                example: Too many requests are updating this profile at the same time
              errors:
                type: array
                items: {}
              StatusCode:
                type: integer
                example: 409
