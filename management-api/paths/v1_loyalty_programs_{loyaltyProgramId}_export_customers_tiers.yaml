get:
  operationId: exportCustomersTiers
  summary: Export customers' tier data
  description: >
    <div class="redoc-warning small">Management API endpoints are <b>not</b>
    meant to be used in real-time integrations that directly serve your end
    users. Rate limit: 3 requests per second.</div>


    Download a CSV file containing the tier information for customers of the
    specified loyalty program.


    The generated file contains the following columns:


    - `programid`: The identifier of the loyalty program. It is displayed in
    your Talon.One deployment URL.

    - `subledgerid`: The ID of the subledger associated with the loyalty
    program. This column is empty if the loyalty program has no subledger. In
    this case, refer to the export file name to get the ID of the loyalty
    program.

    - `customerprofileid`: The ID used to integrate customer profiles with the
    loyalty program.

    - `tiername`: The name of the tier.

    - `startdate`: The tier start date in RFC3339.

    - `expirydate`: The tier expiry date in RFC3339.


    You can filter the results by providing the following optional input
    parameters:


    - `subledgerIds` (optional): Filter results by an array of subledger IDs. If
    no value is provided, all subledger data for the specified loyalty program
    will be exported.

    - `tierNames` (optional): Filter results by an array of tier names. If no
    value is provided, all tier data for the specified loyalty program will be
    exported.
  tags:
    - Loyalty
  parameters:
    - name: loyaltyProgramId
      in: path
      description: The identifier for the loyalty program.
      example: '45'
      required: true
      schema:
        type: string
    - name: subledgerIds
      in: query
      required: false
      description: An array of subledgers IDs to filter the export by.
      example:
        - subledger1
        - subledger2
      style: form
      explode: false
      schema:
        type: array
        items:
          type: string
    - name: tierNames
      in: query
      required: false
      description: An array of tier names to filter the export by.
      example:
        - tier1
        - tier2
      style: form
      explode: false
      schema:
        type: array
        items:
          type: string
  responses:
    '200':
      description: OK
      content:
        application/csv:
          schema:
            type: string
            format: csv
          examples:
            response:
              value: >
                programid,subledgerid,customerprofileid,tiername,startdate,expirydate

                1,SUB1,Dinesh,Golden,2023-08-02T15:04:05Z07:00,2024-08-02T15:04:05Z07:00

                1,SUB2,Gilfoyle,Silver,2023-03-21T03:45:12Z05:00,2026-03-21T03:45:12Z05:00
