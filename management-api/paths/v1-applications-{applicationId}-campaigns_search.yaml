# path: /v1/applications/{applicationId}/campaigns_search
post:
  operationId: getCampaignByAttributes
  summary: List campaigns that match the given attributes
  description: >
    <div class="redoc-warning small">Management API endpoints are <b>not</b>
    meant to be used in real-time integrations that directly serve your end
    users. Rate limit: 3 requests per second.</div>


    Get a list of all the campaigns that match a set of attributes.
  tags:
    - Campaigns
  parameters:
    - name: pageSize
      in: query
      required: false
      description: The number of items in the response.
      example: 1000
      schema:
        type: integer
        minimum: 1
        maximum: 1000
        default: 1000
    - name: skip
      in: query
      required: false
      description: The number of items to skip when paging through large result sets.
      example: 100
      schema:
        type: integer
    - name: sort
      in: query
      required: false
      description: >
        The field by which results should be sorted. By default, results are
        sorted in ascending order. To sort them in descending order, prefix the
        field name with `-`.


        **Note:** You may not be able to use all fields for sorting. This is due
        to performance limitations.
      example: name
      schema:
        type: string
    - name: applicationId
      in: path
      required: true
      description: >-
        The ID of the Application. It is displayed in your Talon.One deployment
        URL.
      example: 42
      schema:
        type: integer
    - name: campaignState
      in: query
      description: >
        Filter results by the state of the campaign.


        - `enabled`: Campaigns that are scheduled, running (activated), or
        expired.

        - `running`: Campaigns that are running (activated).

        - `disabled`: Campaigns that are disabled.

        - `expired`: Campaigns that are expired.

        - `archived`: Campaigns that are archived.
      example: enabled
      required: false
      schema:
        type: string
        enum:
          - enabled
          - disabled
          - archived
          - scheduled
          - running
          - expired
          - staged
  requestBody:
    content:
      application/json:
        schema:
          type: object
          required:
            - attributes
          properties:
            attributes:
              type: object
              description: >-
                Properties to match against a campaign. All provided attributes
                will be exactly matched against campaign attributes.
    description: body
    required: true
  responses:
    '200':
      description: OK
      content:
        application/json:
          schema:
            type: object
            required:
              - totalResultSize
              - data
            properties:
              totalResultSize:
                type: integer
                example: 1
              data:
                type: array
                items:
                  allOf:
                    - type: object
                      required:
                        - id
                        - created
                      properties:
                        id:
                          type: integer
                          description: Unique ID for this entity.
                          example: 4
                        created:
                          type: string
                          format: date-time
                          description: The exact moment this entity was created.
                          example: '2020-06-10T09:05:27.993483Z'
                    - type: object
                      required:
                        - applicationId
                      properties:
                        applicationId:
                          type: integer
                          description: The ID of the Application that owns this entity.
                          example: 322
                    - type: object
                      required:
                        - userId
                      properties:
                        userId:
                          type: integer
                          description: The ID of the user associated with this entity.
                          example: 388
                    - type: object
                      properties:
                        name:
                          type: string
                          title: Campaign Name
                          description: A user-facing name for this campaign.
                          minLength: 1
                          example: Summer promotions
                        description:
                          type: string
                          title: Campaign Description
                          description: A detailed description of the campaign.
                          example: Campaign for all summer 2021 promotions
                        startTime:
                          type: string
                          format: date-time
                          description: Timestamp when the campaign will become active.
                          example: '2021-07-20T22:00:00Z'
                        endTime:
                          type: string
                          format: date-time
                          description: Timestamp when the campaign will become inactive.
                          example: '2021-09-22T22:00:00Z'
                        attributes:
                          type: object
                          description: Arbitrary properties associated with this campaign.
                        state:
                          type: string
                          enum:
                            - enabled
                            - disabled
                            - archived
                          default: enabled
                          example: enabled
                          description: >
                            A disabled or archived campaign is not evaluated for
                            rules or coupons.
                        activeRulesetId:
                          type: integer
                          description: >
                            [ID of
                            Ruleset](https://docs.talon.one/management-api#operation/getRulesets)
                            this

                            campaign applies on customer session evaluation.
                          example: 6
                        tags:
                          type: array
                          description: A list of tags for the campaign.
                          example:
                            - summer
                          maxItems: 50
                          items:
                            type: string
                            minLength: 1
                            maxLength: 50
                        reevaluateOnReturn:
                          type: boolean
                          title: Reevaluate on return
                          description: >-
                            Indicates whether this campaign should be
                            reevaluated when a customer returns an item.
                          example: true
                        features:
                          type: array
                          description: The features enabled in this campaign.
                          example:
                            - coupons
                            - referrals
                          items:
                            type: string
                            enum:
                              - coupons
                              - referrals
                              - loyalty
                              - giveaways
                              - strikethrough
                              - achievements
                        couponSettings:
                          type: object
                          properties:
                            validCharacters:
                              type: array
                              description: >
                                List of characters used to generate the random
                                parts of a code.
                              example:
                                - A
                                - B
                                - C
                                - D
                                - E
                                - F
                                - G
                                - H
                                - I
                                - J
                                - K
                                - L
                                - M
                                - 'N'
                                - O
                                - P
                                - Q
                                - R
                                - S
                                - T
                                - U
                                - V
                                - W
                                - X
                                - 'Y'
                                - Z
                                - '0'
                                - '1'
                                - '2'
                                - '3'
                                - '4'
                                - '5'
                                - '6'
                                - '7'
                                - '8'
                                - '9'
                              items:
                                type: string
                            couponPattern:
                              type: string
                              description: >
                                The pattern used to generate codes, such as
                                coupon codes, referral codes, and loyalty cards.
                                The character `#` is a placeholder and is
                                replaced by a random character from the
                                `validCharacters` set.
                              maxLength: 100
                              minLength: 3
                              pattern: ^[A-Za-z0-9_#-]*$
                              example: SUMMER-####-####
                          additionalProperties: false
                          required:
                            - couponPattern
                            - validCharacters
                        referralSettings:
                          type: object
                          properties:
                            validCharacters:
                              type: array
                              description: >
                                List of characters used to generate the random
                                parts of a code.
                              example:
                                - A
                                - B
                                - C
                                - D
                                - E
                                - F
                                - G
                                - H
                                - I
                                - J
                                - K
                                - L
                                - M
                                - 'N'
                                - O
                                - P
                                - Q
                                - R
                                - S
                                - T
                                - U
                                - V
                                - W
                                - X
                                - 'Y'
                                - Z
                                - '0'
                                - '1'
                                - '2'
                                - '3'
                                - '4'
                                - '5'
                                - '6'
                                - '7'
                                - '8'
                                - '9'
                              items:
                                type: string
                            couponPattern:
                              type: string
                              description: >
                                The pattern used to generate codes, such as
                                coupon codes, referral codes, and loyalty cards.
                                The character `#` is a placeholder and is
                                replaced by a random character from the
                                `validCharacters` set.
                              maxLength: 100
                              minLength: 3
                              pattern: ^[A-Za-z0-9_#-]*$
                              example: SUMMER-####-####
                          additionalProperties: false
                          required:
                            - couponPattern
                            - validCharacters
                        limits:
                          type: array
                          description: >
                            The set of [budget
                            limits](https://docs.talon.one/docs/product/campaigns/settings/managing-campaign-budgets)
                            for this campaign.
                          items:
                            type: object
                            required:
                              - action
                              - limit
                              - entities
                            properties:
                              action:
                                type: string
                                description: >
                                  The limitable action to which this limit
                                  applies. For example:

                                  - `setDiscount`

                                  - `setDiscountEffect`

                                  - `redeemCoupon`

                                  - `createCoupon`
                                example: createCoupon
                              limit:
                                type: number
                                minimum: 0
                                example: 1000
                                description: The value to set for the limit.
                              period:
                                description: The period on which the budget limit recurs.
                                type: string
                                enum:
                                  - daily
                                  - weekly
                                  - monthly
                                  - yearly
                                example: yearly
                              entities:
                                type: array
                                description: The entity that this limit applies to.
                                example:
                                  - Coupon
                                items:
                                  type: string
                                  enum:
                                    - Coupon
                                    - Referral
                                    - Profile
                                    - Identifier
                                    - Store
                                    - Session
                        campaignGroups:
                          type: array
                          description: >
                            The IDs of the [campaign
                            groups](https://docs.talon.one/docs/product/account/managing-campaign-groups)
                            this campaign belongs to.
                          example:
                            - 1
                            - 3
                          items:
                            type: integer
                        type:
                          type: string
                          title: Type
                          enum:
                            - cartItem
                            - advanced
                          default: advanced
                          example: advanced
                          description: |
                            The campaign type. Possible type values:
                              - `cartItem`: Type of campaign that can apply effects only to cart items.
                              - `advanced`: Type of campaign that can apply effects to customer sessions and cart items.
                        linkedStoreIds:
                          type: array
                          description: >
                            A list of store IDs that you want to link to the
                            campaign.


                            **Note:** Campaigns with linked store IDs will only
                            be evaluated when there is a

                            [customer session
                            update](https://docs.talon.one/integration-api#tag/Customer-sessions/operation/updateCustomerSessionV2)

                            that references a linked store.
                          items:
                            type: integer
                          example:
                            - 1
                            - 2
                            - 3
                      required:
                        - name
                        - state
                        - tags
                        - limits
                        - features
                    - type: object
                      properties:
                        budgets:
                          type: array
                          items:
                            type: object
                            required:
                              - action
                              - limit
                              - counter
                            properties:
                              action:
                                type: string
                                description: >
                                  The limitable action to which this limit
                                  applies. For example:

                                  - `setDiscount`

                                  - `setDiscountEffect`

                                  - `redeemCoupon`

                                  - `createCoupon`
                                example: createCoupon
                              limit:
                                type: number
                                minimum: 0
                                example: 1000
                                description: The value to set for the limit.
                              counter:
                                type: number
                                minimum: 0
                                example: 42
                                description: >-
                                  The number of occurrences of the limited
                                  action in the context of the campaign.
                          description: >
                            A list of all the budgets that are defined by this
                            campaign and their usage.


                            **Note:** Budgets that are not defined do not appear
                            in this list and their usage is

                            not counted until they are defined.
                        couponRedemptionCount:
                          type: integer
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Number of coupons redeemed in the campaign.
                          example: 163
                        referralRedemptionCount:
                          type: integer
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Number of referral codes redeemed in the campaign.
                          example: 3
                        discountCount:
                          type: number
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total amount of discounts redeemed in the campaign.
                          example: 288
                        discountEffectCount:
                          type: integer
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total number of times discounts were redeemed in
                            this campaign.
                          example: 343
                        couponCreationCount:
                          type: integer
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total number of coupons created by rules in this
                            campaign.
                          example: 16
                        customEffectCount:
                          type: integer
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total number of custom effects triggered by rules in
                            this campaign.
                          example: 0
                        referralCreationCount:
                          type: integer
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total number of referrals created by rules in this
                            campaign.
                          example: 8
                        addFreeItemEffectCount:
                          type: integer
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total number of times the [add free item
                            effect](https://docs.talon.one/docs/dev/integration-api/api-effects#addfreeitem)
                            can be triggered in this campaign.
                          example: 0
                        awardedGiveawaysCount:
                          type: integer
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total number of giveaways awarded by rules in this
                            campaign.
                          example: 9
                        createdLoyaltyPointsCount:
                          type: number
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total number of loyalty points created by rules in
                            this campaign.
                          example: 9
                        createdLoyaltyPointsEffectCount:
                          type: integer
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total number of loyalty point creation effects
                            triggered by rules in this campaign.
                          example: 2
                        redeemedLoyaltyPointsCount:
                          type: number
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total number of loyalty points redeemed by rules in
                            this campaign.
                          example: 8
                        redeemedLoyaltyPointsEffectCount:
                          type: integer
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total number of loyalty point redemption effects
                            triggered by rules in this campaign.
                          example: 9
                        callApiEffectCount:
                          type: integer
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total number of webhooks triggered by rules in this
                            campaign.
                          example: 0
                        reservecouponEffectCount:
                          type: integer
                          description: >
                            This property is **deprecated**. The count should be
                            available under *budgets* property.

                            Total number of reserve coupon effects triggered by
                            rules in this campaign.
                          example: 9
                        lastActivity:
                          type: string
                          format: date-time
                          example: '2022-11-10T23:00:00Z'
                          description: >-
                            Timestamp of the most recent event received by this
                            campaign.
                        updated:
                          type: string
                          format: date-time
                          example: '2022-10-97T35:00:00Z'
                          description: >
                            Timestamp of the most recent update to the
                            campaign's property. Updates to external entities
                            used in this campaign

                            are **not** registered by this property, such as
                            collection or coupon updates.
                        createdBy:
                          type: string
                          description: >-
                            Name of the user who created this campaign if
                            available.
                          example: John Doe
                        updatedBy:
                          type: string
                          description: >-
                            Name of the user who last updated this campaign if
                            available.
                          example: Jane Doe
                        templateId:
                          type: integer
                          description: >-
                            The ID of the Campaign Template this Campaign was
                            created from.
                          example: 3
                        frontendState:
                          type: string
                          description: >-
                            The campaign state displayed in the Campaign
                            Manager.
                          enum:
                            - expired
                            - scheduled
                            - running
                            - disabled
                            - archived
                            - staged
                          example: running
                        storesImported:
                          type: boolean
                          description: >-
                            Indicates whether the linked stores were imported
                            via a CSV file.
                          example: true
                        valueMapsIds:
                          type: array
                          description: A list of value map IDs for the campaign.
                          items:
                            type: integer
                          example:
                            - 100
                            - 215
                        experimentId:
                          type: integer
                          description: The ID of the Experiment this Campaign is part of.
                          example: 1
                      required:
                        - state
                        - description
                        - type
                        - frontendState
                        - storesImported
                    - type: object
                      properties:
                        revisionFrontendState:
                          type: string
                          description: >-
                            The campaign revision state displayed in the
                            Campaign Manager.
                          enum:
                            - revised
                            - pending
                          example: revised
                        activeRevisionId:
                          type: integer
                          description: >
                            ID of the revision that was last activated on this
                            campaign.
                          example: 6
                        activeRevisionVersionId:
                          type: integer
                          description: >
                            ID of the revision version that is active on the
                            campaign.
                          example: 6
                        version:
                          type: integer
                          description: >
                            Incrementing number representing how many revisions
                            have been activated on this campaign, starts from 0
                            for a new campaign.
                          example: 6
                        currentRevisionId:
                          type: integer
                          description: >
                            ID of the revision currently being modified for the
                            campaign.
                          example: 6
                        currentRevisionVersionId:
                          type: integer
                          description: >
                            ID of the latest version applied on the current
                            revision.
                          example: 6
                        stageRevision:
                          type: boolean
                          description: >
                            Flag for determining whether we use current revision
                            when sending requests with staging API key.
                          example: false
                          default: false
                    - type: object
                      required:
                        - reevaluateOnReturn
