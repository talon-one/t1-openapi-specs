# path: /v1/loyalty_programs/{loyaltyProgramId}/cards/batch
post:
  operationId: createBatchLoyaltyCards
  summary: Create loyalty cards
  description: >
    <div class="redoc-warning small">Management API endpoints are <b>not</b>
    meant to be used in real-time integrations that directly serve your end
    users. Rate limit: 3 requests per second.</div>


    Create a batch of loyalty cards in a specified [card-based loyalty
    program](https://docs.talon.one/docs/product/loyalty-programs/overview#loyalty-program-types).


    Customers can use loyalty cards to collect and spend loyalty points.


    **Important:**


    - The specified card-based loyalty program must have a defined card code
    format that is used to generate the loyalty card codes.

    - Trying to create more than 20,000 loyalty cards in a single request
    returns an error message with a `400` status code.
  tags:
    - Loyalty cards
  parameters:
    - name: loyaltyProgramId
      in: path
      description: >
        Identifier of the card-based loyalty program containing the loyalty
        card. You can get the ID with

        the [List loyalty
        programs](https://docs.talon.one/management-api#tag/Loyalty/operation/getLoyaltyPrograms)
        endpoint.
      example: 33
      required: true
      schema:
        type: integer
  requestBody:
    content:
      application/json:
        schema:
          allOf:
            - type: object
              required:
                - numberOfCards
              properties:
                numberOfCards:
                  type: integer
                  description: Number of loyalty cards in the batch.
                  example: 5000
                batchId:
                  type: string
                  description: ID of the loyalty card batch.
                  minLength: 4
                  maxLength: 20
                  pattern: ^[A-Za-z0-9_-]*$
                  example: hwernpjz
                status:
                  type: string
                  enum:
                    - active
                    - inactive
                  default: active
                  description: Status of the loyalty cards in the batch.
                  example: active
                cardCodeSettings:
                  type: object
                  properties:
                    validCharacters:
                      type: array
                      description: >
                        List of characters used to generate the random parts of
                        a code.
                      example:
                        - A
                        - B
                        - C
                        - D
                        - E
                        - F
                        - G
                        - H
                        - I
                        - J
                        - K
                        - L
                        - M
                        - 'N'
                        - O
                        - P
                        - Q
                        - R
                        - S
                        - T
                        - U
                        - V
                        - W
                        - X
                        - 'Y'
                        - Z
                        - '0'
                        - '1'
                        - '2'
                        - '3'
                        - '4'
                        - '5'
                        - '6'
                        - '7'
                        - '8'
                        - '9'
                      items:
                        type: string
                    couponPattern:
                      type: string
                      description: >
                        The pattern used to generate codes, such as coupon
                        codes, referral codes, and loyalty cards. The character
                        `#` is a placeholder and is replaced by a random
                        character from the `validCharacters` set.
                      maxLength: 100
                      minLength: 3
                      pattern: ^[A-Za-z0-9_#-]*$
                      example: SUMMER-####-####
                  additionalProperties: false
                  required:
                    - couponPattern
                    - validCharacters
    description: body
    required: true
  responses:
    '200':
      description: OK
      content:
        application/json:
          schema:
            type: object
            required:
              - numberOfCardsGenerated
              - batchId
            properties:
              numberOfCardsGenerated:
                type: integer
                description: Number of loyalty cards in the batch.
                example: 5000
              batchId:
                type: string
                description: ID of the loyalty card batch.
                example: hwernpjz
    '400':
      description: Bad request
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
              errors:
                type: array
                description: >-
                  An array of individual problems encountered during the
                  request.
                items:
                  type: object
                  required:
                    - source
                    - title
                  properties:
                    title:
                      type: string
                      description: Short description of the problem.
                    details:
                      type: string
                      description: >-
                        Longer description of this specific instance of the
                        problem.
                    source:
                      type: object
                      description: >
                        The source of the current error, exactly one of
                        `pointer`, `parameter` or `line` will be defined.
                      properties:
                        pointer:
                          type: string
                          description: >-
                            Pointer to the path in the payload that caused this
                            error.
                        parameter:
                          type: string
                          description: Query parameter that caused this error.
                        line:
                          type: string
                          description: >-
                            Line number in uploaded multipart file that caused
                            this error. 'N/A' if unknown.
                        resource:
                          type: string
                          description: Pointer to the resource that caused this error.
              StatusCode:
                type: integer
                description: The error code
    '401':
      description: Unauthorized
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
              errors:
                type: array
                description: >-
                  An array of individual problems encountered during the
                  request.
                items:
                  type: object
                  required:
                    - source
                    - title
                  properties:
                    title:
                      type: string
                      description: Short description of the problem.
                    details:
                      type: string
                      description: >-
                        Longer description of this specific instance of the
                        problem.
                    source:
                      type: object
                      description: >
                        The source of the current error, exactly one of
                        `pointer`, `parameter` or `line` will be defined.
                      properties:
                        pointer:
                          type: string
                          description: >-
                            Pointer to the path in the payload that caused this
                            error.
                        parameter:
                          type: string
                          description: Query parameter that caused this error.
                        line:
                          type: string
                          description: >-
                            Line number in uploaded multipart file that caused
                            this error. 'N/A' if unknown.
                        resource:
                          type: string
                          description: Pointer to the resource that caused this error.
              StatusCode:
                type: integer
                description: The error code
    '404':
      description: Not found
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
              errors:
                type: array
                description: >-
                  An array of individual problems encountered during the
                  request.
                items:
                  type: object
                  required:
                    - source
                    - title
                  properties:
                    title:
                      type: string
                      description: Short description of the problem.
                    details:
                      type: string
                      description: >-
                        Longer description of this specific instance of the
                        problem.
                    source:
                      type: object
                      description: >
                        The source of the current error, exactly one of
                        `pointer`, `parameter` or `line` will be defined.
                      properties:
                        pointer:
                          type: string
                          description: >-
                            Pointer to the path in the payload that caused this
                            error.
                        parameter:
                          type: string
                          description: Query parameter that caused this error.
                        line:
                          type: string
                          description: >-
                            Line number in uploaded multipart file that caused
                            this error. 'N/A' if unknown.
                        resource:
                          type: string
                          description: Pointer to the resource that caused this error.
              StatusCode:
                type: integer
                description: The error code
