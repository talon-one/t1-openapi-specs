post:
  operationId: addedDeductedPointsBalancesNotification
  summary: Added or deducted points with current balance
  tags:
    - Loyalty notifications
  parameters:
    - name: X-UUID
      in: header
      description: >-
        The unique message ID. You can use it, for example, to deduplicate
        messages.
      schema:
        type: string
      example: 9aa05ee1-876f-42e6-9a5d-fc0bd424d9cb
  requestBody:
    description: >-
      The
      [notification](/docs/product/loyalty-programs/loyalty-notifications/overview)
      informing users when loyalty points are added or deducted, including the
      current balance of points.
    content:
      application/json:
        schema:
          type: object
          properties:
            EmployeeName:
              type: string
              description: The name of the employee who added or deducted points.
              example: Franziska Schneider
            LoyaltyProgramID:
              type: integer
              description: The ID of the loyalty program.
              minimum: 1
              example: 5
            NotificationType:
              type: string
              description: The type of notification.
              enum:
                - LoyaltyAddedDeductedPointsBalances
            ProfileIntegrationID:
              type: string
              description: >-
                The integration ID of the customer profile to whom points were
                added or deducted.
              example: URNGV8294NV
            SessionIntegrationID:
              type: string
              description: >-
                The integration ID of the session through which the points were
                earned or lost.
              example: cc53e4fa-547f-4f5e-8333-76e05c381f67
            SubledgerID:
              type: string
              description: >-
                The ID of the subledger within the loyalty program where these
                points were added.
              example: sub-123
            TypeOfChange:
              type: string
              enum:
                - campaign_manager
                - rule_engine
                - management_api
              description: >
                The notification source, that is, it indicates whether the
                points were added or deducted via one of the following routes:

                - [The Campaign Manager](/docs/product/getting-started)

                - [Management API](/management-api#tag/Loyalty)

                - [Rule
                Engine](/docs/product/applications/evaluation-order-for-rules-and-filters)
            UserID:
              type: integer
              description: The ID of the employee who added or deducted points.
              example: 25
            Actions:
              type: array
              description: >-
                The list of actions that have been triggered in the loyalty
                program.
              minItems: 1
              items:
                type: object
                properties:
                  Amount:
                    type: number
                    description: The amount of added or deducted loyalty points.
                    example: 10.99
                  Reason:
                    type: string
                    description: The reason for the points addition or deduction.
                    example: Compensation
                  Operation:
                    type: string
                    description: >-
                      The action (addition or deduction) made with loyalty
                      points.
                    enum:
                      - addition
                      - deduction
                  StartDate:
                    type: string
                    format: date-time
                    description: The start date for loyalty points.
                    example: '2023-01-24T14:15:22Z'
                  ExpiryDate:
                    type: string
                    format: date-time
                    description: The expiration date for loyalty points.
                    example: '2024-01-24T14:15:22Z'
            CurrentPoints:
              type: number
              description: The current points balance.
              example: 10.99
        example:
          ProfileIntegrationID: URNGV8294NV
          LoyaltyProgramID: 5
          SubledgerID: sub-123
          TypeOfChange: campaign_manager
          EmployeeName: Franziska Schneider
          UserID: 25
          SessionIntegrationID: cc53e4fa-547f-4f5e-8333-76e05c381f67
          NotificationType: LoyaltyAddedDeductedPointsBalances
          CurrentPoints: 10.99
          Actions:
            - Amount: 10.99
              Reason: Compensation
              Operation: addition
              StartDate: '2023-01-24T14:15:22Z'
              ExpiryDate: '2024-01-24T14:15:22Z'
    required: true
